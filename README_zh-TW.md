# Gité£›è¡Œè¦å‰‡(Flight Rules)

ğŸŒ
*[English](README.md) âˆ™ [EspaÃ±ol](README_es.md)  âˆ™  [Ğ ÑƒÑÑĞºĞ¸Ğ¹](README_ru.md) âˆ™ [ç¹é«”ä¸­æ–‡](README_zh-TW.md) âˆ™ [ç°¡é«”ä¸­æ–‡](README_zh-CN.md) âˆ™ [í•œêµ­ì–´](README_kr.md)  âˆ™  [Tiáº¿ng Viá»‡t](README_vi.md) âˆ™ [FranÃ§ais](README_fr.md) âˆ™ [æ—¥æœ¬èª](README_ja.md)*

#### å‰è¨€

- è‹±æ–‡åŸç‰ˆ[README](https://github.com/k88hudson/git-flight-rules/blob/master/README.md)
- ç¿»è­¯å¯èƒ½å­˜åœ¨éŒ¯èª¤æˆ–ä¸æ¨™æº–çš„åœ°æ–¹ï¼Œæ­¡è¿å¤§å®¶æŒ‡æ­£å’Œä¿®æ”¹ï¼Œè¬è¬ï¼

#### ä»€éº¼æ˜¯"é£›è¡Œè¦å‰‡"?

é€™æ˜¯ä¸€ç¯‡çµ¦å¤ªç©ºäººï¼ˆé€™è£¡å°±æ˜¯æŒ‡ä½¿ç”¨Gitçš„ç¨‹å¼è¨­è¨ˆå¸«å€‘ï¼‰çš„æŒ‡å—ï¼Œç”¨ä¾†æŒ‡å°å•é¡Œå‡ºç¾å¾Œçš„æ‡‰å°ä¹‹æ³•ã€‚

>  *é£›è¡Œè¦å‰‡(Flight Rules)* æ˜¯è¨˜éŒ„åœ¨æ‰‹å†Šä¸Šçš„ä¾†ä¹‹ä¸æ˜“çš„ä¸€ç³»åˆ—çŸ¥è­˜ï¼Œè¨˜éŒ„äº†æŸå€‹äº‹æƒ…ç™¼ç”Ÿçš„åŸå› ï¼Œä»¥åŠæ€æ¨£ä¸€æ­¥ä¸€æ­¥çš„é€²è¡Œè™•ç†ã€‚æœ¬è³ªä¸Š, å®ƒå€‘æ˜¯ç‰¹å®šå ´æ™¯çš„éå¸¸è©³ç´°çš„æ¨™æº–è™•ç†æµç¨‹ã€‚ [...]

> è‡ª20ä¸–ç´€60å¹´ä»£åˆä»¥ä¾†ï¼ŒNASAä¸€ç›´åœ¨æ•æ‰(capturing)æˆ‘å€‘çš„å¤±èª¤ï¼Œç½é›£å’Œè§£æ±ºæ–¹æ¡ˆ, ç•¶æ™‚æ°´æ˜Ÿæ™‚ä»£(Mercury-era)çš„åœ°é¢å°çµ„é¦–å…ˆé–‹å§‹å°‡â€œç¶“é©—æ•™è¨“â€æ”¶é›†åˆ°ä¸€å€‹ç¶±è¦(compendium)ä¸­ï¼Œè©²ç¶±ç¾åœ¨å·²ç¶“æœ‰ä¸Šåƒå€‹å•é¡Œæƒ…æ™¯ï¼Œå¾ç™¼å‹•æ©Ÿæ•…éšœåˆ°ç ´æçš„è‰™å£æŠŠæ‰‹åˆ°è¨ˆç®—æ©Ÿæ•…éšœï¼Œä»¥åŠå®ƒå€‘å°æ‡‰çš„è§£æ±ºæ–¹æ¡ˆã€‚

&mdash; Chris Hadfield, *ä¸€å€‹å¤ªç©ºäººçš„ç”Ÿæ´»æŒ‡å—(An Astronaut's Guide to Life)*ã€‚

#### é€™ç¯‡æ–‡ç« çš„ç´„å®š

ç‚ºäº†æ¸…æ¥šçš„è¡¨è¿°ï¼Œé€™ç¯‡æ–‡ä»¶è£¡çš„æ‰€æœ‰ä¾‹å­ä½¿ç”¨äº†è‡ªè¨‚çš„bash æç¤ºï¼Œä»¥ä¾¿æŒ‡ç¤ºç•¶å‰åˆ†æ”¯å’Œæ˜¯å¦æœ‰æš«å­˜çš„è®ŠåŒ–(changes)ã€‚åˆ†æ”¯åç”¨å°æ‹¬è™Ÿæ‹¬èµ·ä¾†ï¼Œåˆ†æ”¯åå¾Œé¢è·Ÿçš„`*`è¡¨ç¤ºæš«å­˜çš„è®ŠåŒ–(changes)ã€‚

[![Join the chat at https://gitter.im/k88hudson/git-flight-rules](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/k88hudson/git-flight-rules?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

  - [ç·¨è¼¯æäº¤(editting commits)](#%E7%BC%96%E8%BE%91%E6%8F%90%E4%BA%A4editting-commits)
    - [æˆ‘å‰›æ‰æäº¤äº†ä»€éº¼?](#%E6%88%91%E5%88%9A%E6%89%8D%E6%8F%90%E4%BA%A4%E4%BA%86%E4%BB%80%E4%B9%88)
    - [æˆ‘çš„æäº¤è¨Šæ¯(commit message)å¯«éŒ¯äº†](#%E6%88%91%E7%9A%84%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AFcommit-message%E5%86%99%E9%94%99%E4%BA%86)
    - [æˆ‘æäº¤(commit)è£¡çš„ä½¿ç”¨è€…åç¨±å’Œä¿¡ç®±ä¸å°](#%E6%88%91%E6%8F%90%E4%BA%A4commit%E9%87%8C%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E9%82%AE%E7%AE%B1%E4%B8%8D%E5%AF%B9)
    - [æˆ‘æƒ³å¾ä¸€å€‹æäº¤(commit)è£¡ç§»é™¤ä¸€å€‹æ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BB%8E%E4%B8%80%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E9%87%8C%E7%A7%BB%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6)
    - [æˆ‘æƒ³åˆªé™¤æˆ‘çš„æœ€å¾Œä¸€æ¬¡æäº¤(commit)](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E6%88%91%E7%9A%84%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4commit)
    - [åˆªé™¤ä»»æ„æäº¤(commit)](#%E5%88%A0%E9%99%A4%E4%BB%BB%E6%84%8F%E6%8F%90%E4%BA%A4commit)
    - [æˆ‘å˜—è©¦æ¨ä¸€å€‹ä¿®æ­£å¾Œçš„æäº¤(amended commit)åˆ°é ç¨‹ï¼Œä½†æ˜¯å ±éŒ¯ï¼š](#%E6%88%91%E5%B0%9D%E8%AF%95%E6%8E%A8%E4%B8%80%E4%B8%AA%E4%BF%AE%E6%AD%A3%E5%90%8E%E7%9A%84%E6%8F%90%E4%BA%A4amended-commit%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BD%86%E6%98%AF%E6%8A%A5%E9%94%99)
    - [æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡è¨­(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å…§å®¹](#%E6%88%91%E6%84%8F%E5%A4%96%E7%9A%84%E5%81%9A%E4%BA%86%E4%B8%80%E6%AC%A1%E7%A1%AC%E9%87%8D%E7%BD%AEhard-reset%E6%88%91%E6%83%B3%E6%89%BE%E5%9B%9E%E6%88%91%E7%9A%84%E5%86%85%E5%AE%B9)
  - [æš«å­˜(Staging)](#%E6%9A%82%E5%AD%98staging)
    - [æˆ‘éœ€è¦æŠŠæš«å­˜çš„å…§å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E6%8A%8A%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E6%B7%BB%E5%8A%A0%E5%88%B0%E4%B8%8A%E4%B8%80%E6%AC%A1%E7%9A%84%E6%8F%90%E4%BA%A4commit)
    - [æˆ‘æƒ³è¦æš«å­˜ä¸€å€‹æ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯é€™å€‹æ–‡ä»¶çš„å…¨éƒ¨](#%E6%88%91%E6%83%B3%E8%A6%81%E6%9A%82%E5%AD%98%E4%B8%80%E4%B8%AA%E6%96%B0%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E8%80%8C%E4%B8%8D%E6%98%AF%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E5%85%A8%E9%83%A8)
    - [æˆ‘æƒ³æŠŠåœ¨ä¸€å€‹æ–‡ä»¶è£¡çš„è®ŠåŒ–(changes)åŠ åˆ°å…©å€‹æäº¤(commit)è£¡](#%E6%88%91%E6%83%B3%E6%8A%8A%E5%9C%A8%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E9%87%8C%E7%9A%84%E5%8F%98%E5%8C%96changes%E5%8A%A0%E5%88%B0%E4%B8%A4%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E9%87%8C)
    - [æˆ‘æƒ³æŠŠæš«å­˜çš„å…§å®¹è®Šæˆæœªæš«å­˜ï¼ŒæŠŠæœªæš«å­˜çš„å…§å®¹æš«å­˜èµ·ä¾†](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E5%8F%98%E6%88%90%E6%9C%AA%E6%9A%82%E5%AD%98%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E6%9A%82%E5%AD%98%E8%B5%B7%E6%9D%A5)
  - [æœªæš«å­˜(Unstaged)çš„å…§å®¹](#%E6%9C%AA%E6%9A%82%E5%AD%98unstaged%E7%9A%84%E5%86%85%E5%AE%B9)
    - [æˆ‘æƒ³æŠŠæœªæš«å­˜çš„å…§å®¹ç§»å‹•åˆ°ä¸€å€‹æ–°åˆ†æ”¯](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E7%A7%BB%E5%8A%A8%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³æŠŠæœªæš«å­˜çš„å…§å®¹ç§»å‹•åˆ°å¦ä¸€å€‹å·²å­˜åœ¨çš„åˆ†æ”¯](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E7%A7%BB%E5%8A%A8%E5%88%B0%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³ä¸Ÿæ£„æœ¬åœ°æœªæäº¤çš„è®ŠåŒ–(uncommitted changes)](#%E6%88%91%E6%83%B3%E4%B8%A2%E5%BC%83%E6%9C%AC%E5%9C%B0%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E5%8F%98%E5%8C%96uncommitted-changes)
    - [æˆ‘æƒ³ä¸Ÿæ£„æŸäº›æœªæš«å­˜çš„å…§å®¹](#%E6%88%91%E6%83%B3%E4%B8%A2%E5%BC%83%E6%9F%90%E4%BA%9B%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9)
  - [åˆ†æ”¯(Branches)](#%E5%88%86%E6%94%AFbranches)
    - [æˆ‘å¾éŒ¯èª¤çš„åˆ†æ”¯æ‹‰å–äº†å…§å®¹ï¼Œæˆ–æŠŠå…§å®¹æ‹‰å–åˆ°äº†éŒ¯èª¤çš„åˆ†æ”¯](#%E6%88%91%E4%BB%8E%E9%94%99%E8%AF%AF%E7%9A%84%E5%88%86%E6%94%AF%E6%8B%89%E5%8F%96%E4%BA%86%E5%86%85%E5%AE%B9%E6%88%96%E6%8A%8A%E5%86%85%E5%AE%B9%E6%8B%89%E5%8F%96%E5%88%B0%E4%BA%86%E9%94%99%E8%AF%AF%E7%9A%84%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯èˆ‡é ç¨‹çš„ä¿æŒä¸€è‡´](#%E6%88%91%E6%83%B3%E6%89%94%E6%8E%89%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%8F%90%E4%BA%A4commit%E4%BB%A5%E4%BE%BF%E6%88%91%E7%9A%84%E5%88%86%E6%94%AF%E4%B8%8E%E8%BF%9C%E7%A8%8B%E7%9A%84%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4)
    - [æˆ‘éœ€è¦æäº¤åˆ°ä¸€å€‹æ–°åˆ†æ”¯ï¼Œä½†éŒ¯èª¤çš„æäº¤åˆ°äº†main](#%E6%88%91%E9%9C%80%E8%A6%81%E6%8F%90%E4%BA%A4%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%86%E6%94%AF%E4%BD%86%E9%94%99%E8%AF%AF%E7%9A%84%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BA%86main)
    - [æˆ‘æƒ³ä¿ç•™ä¾†è‡ªå¦å¤–ä¸€å€‹ref-ishçš„æ•´å€‹æ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BF%9D%E7%95%99%E6%9D%A5%E8%87%AA%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AAref-ish%E7%9A%84%E6%95%B4%E4%B8%AA%E6%96%87%E4%BB%B6)
    - [æˆ‘æŠŠå¹¾å€‹æäº¤(commit)æäº¤åˆ°äº†åŒä¸€å€‹åˆ†æ”¯ï¼Œè€Œé€™äº›æäº¤æ‡‰è©²åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯è£¡](#%E6%88%91%E6%8A%8A%E5%87%A0%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BA%86%E5%90%8C%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E8%80%8C%E8%BF%99%E4%BA%9B%E6%8F%90%E4%BA%A4%E5%BA%94%E8%AF%A5%E5%88%86%E5%B8%83%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E5%88%86%E6%94%AF%E9%87%8C)
    - [æˆ‘æƒ³åˆªé™¤ä¸ŠéŠ(upstream)åˆ†æ”¯è¢«åˆªé™¤äº†çš„æœ¬åœ°åˆ†æ”¯](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E4%B8%8A%E6%B8%B8upstream%E5%88%86%E6%94%AF%E8%A2%AB%E5%88%A0%E9%99%A4%E4%BA%86%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF)
    - [æˆ‘ä¸å°å¿ƒåˆªé™¤äº†æˆ‘çš„åˆ†æ”¯](#%E6%88%91%E4%B8%8D%E5%B0%8F%E5%BF%83%E5%88%A0%E9%99%A4%E4%BA%86%E6%88%91%E7%9A%84%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³åˆªé™¤ä¸€å€‹åˆ†æ”¯](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³å¾åˆ¥äººæ­£åœ¨å·¥ä½œçš„é ç¨‹åˆ†æç±¤å‡º(checkout)ä¸€å€‹åˆ†æ”¯](#%E6%88%91%E6%83%B3%E4%BB%8E%E5%88%AB%E4%BA%BA%E6%AD%A3%E5%9C%A8%E5%B7%A5%E4%BD%9C%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E7%AD%BE%E5%87%BAcheckout%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF)
  - [Rebasing å’Œåˆä½µ(Merging)](#rebasing-%E5%92%8C%E5%90%88%E5%B9%B6merging)
    - [æˆ‘æƒ³æ’¤éŠ·rebase/merge](#%E6%88%91%E6%83%B3%E6%92%A4%E9%94%80rebasemerge)
    - [æˆ‘å·²ç¶“rebaseé, ä½†æ˜¯æˆ‘ä¸æƒ³å¼·æ¨(force push)](#%E6%88%91%E5%B7%B2%E7%BB%8Frebase%E8%BF%87-%E4%BD%86%E6%98%AF%E6%88%91%E4%B8%8D%E6%83%B3%E5%BC%BA%E6%8E%A8force-push)
    - [æˆ‘éœ€è¦çµ„åˆ(combine)å¹¾å€‹æäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E7%BB%84%E5%90%88combine%E5%87%A0%E4%B8%AA%E6%8F%90%E4%BA%A4commit)
      - [å®‰å…¨åˆä½µ(merging)ç­–ç•¥](#%E5%AE%89%E5%85%A8%E5%90%88%E5%B9%B6merging%E7%AD%96%E7%95%A5)
      - [æˆ‘éœ€è¦å°‡ä¸€å€‹åˆ†æ”¯åˆä½µæˆä¸€å€‹æäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E5%B0%86%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E6%88%90%E4%B8%80%E4%B8%AA%E6%8F%90%E4%BA%A4commit)
      - [æˆ‘åªæƒ³çµ„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit)](#%E6%88%91%E5%8F%AA%E6%83%B3%E7%BB%84%E5%90%88combine%E6%9C%AA%E6%8E%A8%E7%9A%84%E6%8F%90%E4%BA%A4unpushed-commit)
    - [æª¢æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆä½µ(merge)éäº†](#%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%88%86%E6%94%AF%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4commit%E9%83%BD%E5%90%88%E5%B9%B6merge%E8%BF%87%E4%BA%86)
    - [äº’å‹•å¼rebase(interactive rebase)å¯èƒ½å‡ºç¾çš„å•é¡Œ](#%E4%BA%A4%E4%BA%92%E5%BC%8Frebaseinteractive-rebase%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98)
      - [é€™å€‹rebase ç·¨è¼¯è¢å¹•å‡ºç¾'noop'](#%E8%BF%99%E4%B8%AArebase-%E7%BC%96%E8%BE%91%E5%B1%8F%E5%B9%95%E5%87%BA%E7%8E%B0noop)
      - [æœ‰è¡çªçš„æƒ…æ³](#%E6%9C%89%E5%86%B2%E7%AA%81%E7%9A%84%E6%83%85%E5%86%B5)
  - [Stash](#stash)
    - [æš«å­˜æ‰€æœ‰æ”¹å‹•](#%E6%9A%82%E5%AD%98%E6%89%80%E6%9C%89%E6%94%B9%E5%8A%A8)
    - [æš«å­˜æŒ‡å®šæ–‡ä»¶](#%E6%9A%82%E5%AD%98%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6)
    - [æš«å­˜æ™‚è¨˜éŒ„æ¶ˆæ¯](#%E6%9A%82%E5%AD%98%E6%97%B6%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF)
    - [ä½¿ç”¨æŸå€‹æŒ‡å®šæš«å­˜](#%E4%BD%BF%E7%94%A8%E6%9F%90%E4%B8%AA%E6%8C%87%E5%AE%9A%E6%9A%82%E5%AD%98)
    - [æš«å­˜æ™‚ä¿ç•™æœªæš«å­˜çš„å…§å®¹](#%E6%9A%82%E5%AD%98%E6%97%B6%E4%BF%9D%E7%95%99%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9)
  - [é›œé …(Miscellaneous Objects)](#%E6%9D%82%E9%A1%B9miscellaneous-objects)
    - [è¤‡è£½æ‰€æœ‰å­æ¨¡çµ„](#%E5%85%8B%E9%9A%86%E6%89%80%E6%9C%89%E5%AD%90%E6%A8%A1%E5%9D%97)
    - [åˆªé™¤æ¨™ç±¤(tag)](#%E5%88%A0%E9%99%A4%E6%A0%87%E7%AD%BEtag)
    - [æ¢è¦†å·²åˆªé™¤æ¨™ç±¤(tag)](#%E6%81%A2%E5%A4%8D%E5%B7%B2%E5%88%A0%E9%99%A4%E6%A0%87%E7%AD%BEtag)
    - [å·²åˆªé™¤è£œä¸(patch)](#%E5%B7%B2%E5%88%A0%E9%99%A4%E8%A1%A5%E4%B8%81patch)
  - [è·Ÿè¹¤æ–‡ä»¶(Tracking Files)](#%E8%B7%9F%E8%B8%AA%E6%96%87%E4%BB%B6tracking-files)
    - [æˆ‘åªæƒ³æ”¹è®Šä¸€å€‹æª”æ¡ˆåå­—çš„å¤§å°å¯«ï¼Œè€Œä¸ä¿®æ”¹å…§å®¹](#%E6%88%91%E5%8F%AA%E6%83%B3%E6%94%B9%E5%8F%98%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%90%8D%E5%AD%97%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99%E8%80%8C%E4%B8%8D%E4%BF%AE%E6%94%B9%E5%86%85%E5%AE%B9)
    - [æˆ‘æƒ³å¾Gitåˆªé™¤ä¸€å€‹æ–‡ä»¶ï¼Œä½†ä¿ç•™è©²æ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BB%8Egit%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E4%BD%86%E4%BF%9D%E7%95%99%E8%AF%A5%E6%96%87%E4%BB%B6)
  - [é…ç½®(Configuration)](#%E9%85%8D%E7%BD%AEconfiguration)
    - [æˆ‘æƒ³çµ¦ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ¥å(alias)](#%E6%88%91%E6%83%B3%E7%BB%99%E4%B8%80%E4%BA%9Bgit%E5%91%BD%E4%BB%A4%E6%B7%BB%E5%8A%A0%E5%88%AB%E5%90%8Dalias)
    - [æˆ‘æƒ³å¿«å–ä¸€å€‹å€‰åº«(repository)çš„ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼](#%E6%88%91%E6%83%B3%E7%BC%93%E5%AD%98%E4%B8%80%E4%B8%AA%E4%BB%93%E5%BA%93repository%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81)
  - [æˆ‘ä¸çŸ¥é“æˆ‘åšéŒ¯äº†äº›ä»€éº¼](#%E6%88%91%E4%B8%8D%E7%9F%A5%E9%81%93%E6%88%91%E5%81%9A%E9%94%99%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88)
- [å…¶å®ƒè³‡æº(Other Resources)](#%E5%85%B6%E5%AE%83%E8%B5%84%E6%BA%90other-resources)
  - [æ›¸(Books)](#%E4%B9%A6books)
  - [æ•™å­¸(Tutorials)](#%E6%95%99%E7%A8%8Btutorials)
  - [è…³æœ¬å’Œå·¥å…·(Scripts and Tools)](#%E8%84%9A%E6%9C%AC%E5%92%8C%E5%B7%A5%E5%85%B7scripts-and-tools)
  - [GUIç”¨æˆ¶ç«¯(GUI Clients)](#gui%E5%AE%A2%E6%88%B7%E7%AB%AFgui-clients)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## ç·¨è¼¯æäº¤(editting commits)

<a name="diff-last"></a>
### æˆ‘å‰›æ‰æäº¤äº†ä»€éº¼?

å¦‚æœä½ ç”¨ `git commit -a` æäº¤äº†ä¸€æ¬¡è®ŠåŒ–(changes)ï¼Œè€Œä½ åˆä¸ç¢ºå®šåˆ°åº•é€™æ¬¡æäº¤äº†å“ªäº›å…§å®¹ã€‚ ä½ å°±å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤é¡¯ç¤ºç•¶å‰`HEAD`ä¸Šçš„æœ€è¿‘ä¸€æ¬¡çš„æäº¤(commit):

```sh
(main)$ git show
```

æˆ–è€…

```sh
$ git log -n1 -p
```

<a name="#i-wrote-the-wrong-thing-in-a-commit-message"></a>
### æˆ‘çš„æäº¤è¨Šæ¯(commit message)å¯«éŒ¯äº†

å¦‚æœä½ çš„æäº¤è¨Šæ¯(commit message)å¯«éŒ¯äº†ä¸”é€™æ¬¡æäº¤(commit)é‚„æ²’æœ‰æ¨(push), ä½ å¯ä»¥é€éä¸‹é¢çš„æ–¹æ³•ä¾†ä¿®æ”¹æäº¤è¨Šæ¯(commit message):

```sh
$ git commit --amend --only
```
é€™æœƒæ‰“é–‹ä½ çš„é»˜èªç·¨è¼¯å™¨, åœ¨é€™è£¡ä½ å¯ä»¥ç·¨è¼¯è¨Šæ¯. å¦ä¸€æ–¹é¢, ä½ ä¹Ÿå¯ä»¥ç”¨ä¸€æ¢å‘½ä»¤ä¸€æ¬¡å®Œæˆ:

```sh
$ git commit --amend --only -m 'xxxxxxx'
```

å¦‚æœä½ å·²ç¶“æ¨(push)äº†é€™æ¬¡æäº¤(commit), ä½ å¯ä»¥ä¿®æ”¹é€™æ¬¡æäº¤(commit)ç„¶å¾Œå¼·æ¨(force push), ä½†æ˜¯ä¸æ¨è–¦é€™éº¼åšã€‚

<a name="commit-wrong-author"></a>
### æˆ‘æäº¤(commit)è£¡çš„ä½¿ç”¨è€…åç¨±å’Œä¿¡ç®±ä¸å°

å¦‚æœé€™åªæ˜¯å–®å€‹æäº¤(commit)ï¼Œä¿®æ”¹å®ƒï¼š

```sh
$ git commit --amend --author "New Authorname <authoremail@mydomain.com>"
```

å¦‚æœä½ éœ€è¦ä¿®æ”¹æ‰€æœ‰æ­·å², åƒè€ƒ 'git filter-branch'çš„æŒ‡å—é .

<a href="#i-want-to-remove-a-file-from-a-commit"></a>
### æˆ‘æƒ³å¾ä¸€å€‹æäº¤(commit)è£¡ç§»é™¤ä¸€å€‹æ–‡ä»¶

é€šéä¸‹é¢çš„æ–¹æ³•ï¼Œå¾ä¸€å€‹æäº¤(commit)è£¡ç§»é™¤ä¸€å€‹æ–‡ä»¶:

```sh
$ git checkout HEAD^ myfile
$ git add -A
$ git commit --amend
```

é€™å°‡éå¸¸æœ‰ç”¨ï¼Œç•¶ä½ æœ‰ä¸€å€‹é–‹æ”¾çš„è£œä¸(open patch)ï¼Œä½ å¾€ä¸Šé¢æäº¤äº†ä¸€å€‹ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œä½ éœ€è¦å¼·æ¨(force push)å»æ›´æ–°é€™å€‹é ç¨‹è£œä¸ã€‚

<a name="delete-pushed-commit"></a>
### æˆ‘æƒ³åˆªé™¤æˆ‘çš„çš„æœ€å¾Œä¸€æ¬¡æäº¤(commit)

å¦‚æœä½ éœ€è¦åˆªé™¤æ¨äº†çš„æäº¤(pushed commits)ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚å¯æ˜¯ï¼Œé€™æœƒä¸å¯é€†çš„æ”¹è®Šä½ çš„æ­·å²ï¼Œä¹Ÿæœƒæäº‚é‚£äº›å·²ç¶“å¾è©²å€‰åº«æ‹‰å–(pulled)äº†çš„äººçš„æ­·å²ã€‚ç°¡è€Œè¨€ä¹‹ï¼Œå¦‚æœä½ ä¸æ˜¯å¾ˆç¢ºå®šï¼Œåƒè¬ä¸è¦é€™éº¼åšã€‚

```sh
$ git reset HEAD^ --hard
$ git push -f [remote] [branch]
```

å¦‚æœä½ é‚„æ²’æœ‰æ¨åˆ°é ç¨‹, æŠŠGité‡è¨­(reset)åˆ°ä½ æœ€å¾Œä¸€æ¬¡æäº¤å‰çš„ç‹€æ…‹å°±å¯ä»¥äº†(åŒæ™‚ä¿å­˜æš«å­˜çš„è®ŠåŒ–):

```
(my-branch*)$ git reset --soft HEAD@{1}

```

é€™åªèƒ½åœ¨æ²’æœ‰æ¨é€ä¹‹å‰æœ‰ç”¨. å¦‚æœä½ å·²ç¶“æ¨äº†, å”¯ä¸€å®‰å…¨èƒ½åšçš„æ˜¯ `git revert SHAofBadCommit`ï¼Œ é‚£æœƒå‰µå»ºä¸€å€‹æ–°çš„æäº¤(commit)ç”¨æ–¼æ’¤æ¶ˆå‰ä¸€å€‹æäº¤çš„æ‰€æœ‰è®ŠåŒ–(changes)ï¼› æˆ–è€…, å¦‚æœä½ æ¨çš„é€™å€‹åˆ†æ”¯æ˜¯rebase-safeçš„ (ä¾‹å¦‚ï¼š å…¶å®ƒé–‹ç™¼è€…ä¸æœƒå¾é€™å€‹åˆ†æ”¯æ‹‰), åªéœ€è¦ä½¿ç”¨ `git push -f`ï¼› æ›´å¤š, è«‹åƒè€ƒ [the above section](#deleteremove-last-pushed-commit)ã€‚

<a name="delete-any-commit"></a>
### åˆªé™¤ä»»æ„æäº¤(commit)

åŒæ¨£çš„è­¦å‘Šï¼šä¸åˆ°è¬ä¸å¾—å·²çš„æ™‚å€™ä¸è¦é€™éº¼åš.

```sh
$ git rebase --onto SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT
$ git push -f [remote] [branch]
```

æˆ–è€…åšä¸€å€‹ [äº’å‹•å¼rebase](#interactive-rebase) åˆªé™¤é‚£äº›ä½ æƒ³è¦åˆªé™¤çš„æäº¤(commit)è£¡æ‰€å°æ‡‰çš„è¡Œã€‚

<a name="#force-push"></a>
### æˆ‘å˜—è©¦æ¨ä¸€å€‹ä¿®æ­£å¾Œçš„æäº¤(amended commit)åˆ°é ç¨‹ï¼Œä½†æ˜¯å ±éŒ¯ï¼š

```sh
To https://github.com/yourusername/repo.git
! [rejected]        mybranch -> mybranch (non-fast-forward)
error: failed to push some refs to 'https://github.com/tanay1337/webmaker.org.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
```

æ³¨æ„, rebasing(è¦‹ä¸‹é¢)å’Œä¿®æ­£(amending)æœƒç”¨ä¸€å€‹**æ–°çš„æäº¤(commit)ä»£æ›¿èˆŠçš„**, æ‰€ä»¥å¦‚æœä¹‹å‰ä½ å·²ç¶“å¾€é ç¨‹å€‰åº«ä¸Šæ¨éä¸€æ¬¡ä¿®æ­£å‰çš„æäº¤(commit)ï¼Œé‚£ä½ ç¾åœ¨å°±å¿…é ˆå¼·æ¨(force push) (`-f`)ã€‚ æ³¨æ„ &ndash; *ç¸½æ˜¯* ç¢ºä¿ä½ æŒ‡æ˜ä¸€å€‹åˆ†æ”¯!

```sh
(my-branch)$ git push origin mybranch -f
```

ä¸€èˆ¬ä¾†èªª, **è¦é¿å…å¼·æ¨**. æœ€å¥½æ˜¯å‰µå»ºå’Œæ¨(push)ä¸€å€‹æ–°çš„æäº¤(commit)ï¼Œè€Œä¸æ˜¯å¼·æ¨ä¸€å€‹ä¿®æ­£å¾Œçš„æäº¤ã€‚å¾Œè€…æœƒä½¿é‚£äº›èˆ‡è©²åˆ†æ”¯æˆ–è©²åˆ†æ”¯çš„å­åˆ†æ”¯å·¥ä½œçš„é–‹ç™¼è€…ï¼Œåœ¨æºæ­·å²ä¸­ç”¢ç”Ÿè¡çªã€‚

<a href="undo-git-reset-hard"></a>
### æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡è¨­(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å…§å®¹

å¦‚æœä½ æ„å¤–çš„åšäº† `git reset --hard`, ä½ é€šå¸¸èƒ½æ‰¾å›ä½ çš„æäº¤(commit), å› ç‚ºGitå°æ¯ä»¶äº‹éƒ½æœƒæœ‰æ—¥èªŒï¼Œä¸”éƒ½æœƒä¿å­˜å¹¾å¤©ã€‚

```sh
(main)$ git reflog
```

ä½ å°‡æœƒçœ‹åˆ°ä¸€å€‹ä½ éå»æäº¤(commit)çš„åˆ—è¡¨, å’Œä¸€å€‹é‡è¨­çš„æäº¤ã€‚ é¸æ“‡ä½ æƒ³è¦å›åˆ°çš„æäº¤(commit)çš„SHAï¼Œå†é‡è¨­ä¸€æ¬¡:

```sh
(main)$ git reset --hard SHA1234
```

é€™æ¨£å°±å®Œæˆäº†ã€‚

## æš«å­˜(Staging)

<a href="#i-need-to-add-staged-changes-to-the-previous-commit"></a>
### æˆ‘éœ€è¦æŠŠæš«å­˜çš„å…§å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit)

```sh
(my-branch*)$ git commit --amend

```

<a name="commit-partial-new-file"></a>
### æˆ‘æƒ³è¦æš«å­˜ä¸€å€‹æ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯é€™å€‹æ–‡ä»¶çš„å…¨éƒ¨

ä¸€èˆ¬ä¾†èªª, å¦‚æœä½ æƒ³æš«å­˜ä¸€å€‹æ–‡ä»¶çš„ä¸€éƒ¨åˆ†, ä½ å¯é€™æ¨£åš:

```sh
$ git add --patch filename.x
```

`-p` ç°¡å¯«ã€‚é€™æœƒæ‰“é–‹äº¤äº’æ¨¡å¼ï¼Œ ä½ å°‡èƒ½å¤ ç”¨ `s` é¸é …ä¾†åˆ†éš”æäº¤(commit)ï¼› ç„¶è€Œ, å¦‚æœé€™å€‹æ–‡ä»¶æ˜¯æ–°çš„, æœƒæ²’æœ‰é€™å€‹é¸æ“‡ï¼Œ æ·»åŠ ä¸€å€‹æ–°æ–‡ä»¶æ™‚, é€™æ¨£åš:

```sh
$ git add -N filename.x
```

ç„¶å¾Œ, ä½ éœ€è¦ç”¨ `e` é¸é …ä¾†æ‰‹å‹•é¸æ“‡éœ€è¦æ·»åŠ çš„è¡Œï¼ŒåŸ·è¡Œ `git diff --cached` å°‡æœƒé¡¯ç¤ºå“ªäº›è¡Œæš«å­˜äº†å“ªäº›è¡Œåªæ˜¯ä¿å­˜åœ¨æœ¬åœ°äº†ã€‚

<a href="stage-in-two-commits"></a>
### æˆ‘æƒ³æŠŠåœ¨ä¸€å€‹æ–‡ä»¶è£¡çš„è®ŠåŒ–(changes)åŠ åˆ°å…©å€‹æäº¤(commit)è£¡

`git add` æœƒæŠŠæ•´å€‹æ–‡ä»¶åŠ å…¥åˆ°ä¸€å€‹æäº¤. `git add -p` å…è¨±äº’å‹•å¼çš„é¸æ“‡ä½ æƒ³è¦æäº¤çš„éƒ¨åˆ†.

<a href="unstaging-edits-and-staging-the-unstaged"></a>
### æˆ‘æƒ³æŠŠæš«å­˜çš„å…§å®¹è®Šæˆæœªæš«å­˜ï¼ŒæŠŠæœªæš«å­˜çš„å…§å®¹æš«å­˜èµ·ä¾†

å¤šæ•¸æƒ…æ³ä¸‹ï¼Œä½ æ‡‰è©²å°‡æ‰€æœ‰çš„å…§å®¹è®Šç‚ºæœªæš«å­˜ï¼Œç„¶å¾Œå†é¸æ“‡ä½ æƒ³è¦çš„å…§å®¹é€²è¡Œcommitã€‚
ä½†å‡å®šä½ å°±æ˜¯æƒ³è¦é€™éº¼åšï¼Œé€™è£¡ä½ å¯ä»¥å‰µå»ºä¸€å€‹è‡¨æ™‚çš„commitä¾†ä¿å­˜ä½ å·²æš«å­˜çš„å…§å®¹ï¼Œç„¶å¾Œæš«å­˜ä½ çš„æœªæš«å­˜çš„å…§å®¹ä¸¦é€²è¡Œstashã€‚ç„¶å¾Œresetæœ€å¾Œä¸€å€‹commitå°‡åŸæœ¬æš«å­˜çš„å…§å®¹è®Šç‚ºæœªæš«å­˜ï¼Œæœ€å¾Œstash popå›ä¾†ã€‚

```sh
$ git commit -m "WIP"
$ git add .
$ git stash
$ git reset HEAD^
$ git stash pop --index 0
```

æ³¨æ„1: é€™è£¡ä½¿ç”¨`pop`åƒ…åƒ…æ˜¯å› ç‚ºæƒ³ç›¡å¯èƒ½ä¿æŒå†ªç­‰ã€‚
æ³¨æ„2: å‡å¦‚ä½ ä¸åŠ ä¸Š`--index`ä½ æœƒæŠŠæš«å­˜çš„æ–‡ä»¶æ¨™è¨˜ç‚ºç‚ºå„²å­˜.é€™å€‹[é€£çµ](https://stackoverflow.com/questions/31595873/git-stash-with-staged-files-does-stash-convert-staged-files-to-unstaged?answertab=active#tab-top) è§£é‡‹å¾—æ¯”è¼ƒæ¸…æ¥šã€‚ï¼ˆä¸éæ˜¯è‹±æ–‡çš„ï¼Œå…¶å¤§æ„æ˜¯èªªï¼Œé€™æ˜¯ä¸€å€‹è¼ƒç‚ºåº•å±¤çš„å•é¡Œï¼Œstashæ™‚æœƒåš2å€‹commitï¼Œå…¶ä¸­ä¸€å€‹æœƒè¨˜éŒ„indexç‹€æ…‹ï¼Œstagedçš„æ–‡ä»¶ç­‰æ±è¥¿ï¼Œå¦ä¸€å€‹ç´€éŒ„worktreeå’Œå…¶ä»–çš„ä¸€äº›æ±è¥¿ï¼Œå¦‚æœä½ ä¸åœ¨applyæ™‚åŠ indexï¼ŒgitæœƒæŠŠå…©å€‹ä¸€èµ·éŠ·æ¯€ï¼Œæ‰€ä»¥stagedè£¡å°±ç©ºäº†ï¼‰ã€‚

## æœªæš«å­˜(Unstaged)çš„å…§å®¹

<a href="move-unstaged-edits-to-new-branch"></a>
### æˆ‘æƒ³æŠŠæœªæš«å­˜çš„å…§å®¹ç§»å‹•åˆ°ä¸€å€‹æ–°åˆ†æ”¯

```sh
$ git checkout -b my-branch
```

<a href="move-unstaged-edits-to-old-branch"></a>
### æˆ‘æƒ³æŠŠæœªæš«å­˜çš„å…§å®¹ç§»å‹•åˆ°å¦ä¸€å€‹å·²å­˜åœ¨çš„åˆ†æ”¯

```sh
$ git stash
$ git checkout my-branch
$ git stash pop
```

<a href="i-want-to-discard-my-local-uncommitted-changes"></a>
### æˆ‘æƒ³ä¸Ÿæ£„æœ¬åœ°æœªæäº¤çš„è®ŠåŒ–(uncommitted changes)

å¦‚æœä½ åªæ˜¯æƒ³é‡è¨­æº(origin)å’Œä½ æœ¬åœ°(local)ä¹‹é–“çš„ä¸€äº›æäº¤(commit)ï¼Œä½ å¯ä»¥ï¼š

```sh
# one commit
(my-branch)$ git reset --hard HEAD^
# two commits
(my-branch)$ git reset --hard HEAD^^
# four commits
(my-branch)$ git reset --hard HEAD~4
# or
(main)$ git checkout -f
```

é‡è¨­æŸå€‹ç‰¹æ®Šçš„æ–‡ä»¶, ä½ å¯ä»¥ç”¨æª”æ¡ˆååšç‚ºåƒæ•¸:

```sh
$ git reset filename
```

<a href="i-want-to-discard-specific-unstaged-changes"></a>
### æˆ‘æƒ³ä¸Ÿæ£„æŸäº›æœªæš«å­˜çš„å…§å®¹

å¦‚æœä½ æƒ³ä¸Ÿæ£„å·¥ä½œæ‹·è²ä¸­çš„ä¸€éƒ¨åˆ†å…§å®¹ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ã€‚

ç°½å‡º(checkout)ä¸éœ€è¦çš„å…§å®¹ï¼Œä¿ç•™éœ€è¦çš„ã€‚

```sh
$ git checkout -p
# Answer y to all of the snippets you want to drop
```

å¦å¤–ä¸€å€‹æ–¹æ³•æ˜¯ä½¿ç”¨ `stash`ï¼Œ Stashæ‰€æœ‰è¦ä¿ç•™ä¸‹çš„å…§å®¹, é‡è¨­å·¥ä½œæ‹·è², é‡æ–°æ‡‰ç”¨ä¿ç•™çš„éƒ¨åˆ†ã€‚

```sh
$ git stash -p
# Select all of the snippets you want to save
$ git reset --hard
$ git stash pop
```

æˆ–è€…, stash ä½ ä¸éœ€è¦çš„éƒ¨åˆ†, ç„¶å¾Œstash dropã€‚

```sh
$ git stash -p
# Select all of the snippets you don't want to save
$ git stash drop
```

## åˆ†æ”¯(Branches)

<a name="pull-wrong-branch"></a>
### æˆ‘å¾éŒ¯èª¤çš„åˆ†æ”¯æ‹‰å–äº†å…§å®¹ï¼Œæˆ–æŠŠå…§å®¹æ‹‰å–åˆ°äº†éŒ¯èª¤çš„åˆ†æ”¯

é€™æ˜¯å¦å¤–ä¸€ç¨®ä½¿ç”¨ `git reflog` æƒ…æ³ï¼Œæ‰¾åˆ°åœ¨é€™æ¬¡éŒ¯èª¤æ‹‰(pull) ä¹‹å‰HEADçš„æŒ‡å‘ã€‚

```sh
(main)$ git reflog
ab7555f HEAD@{0}: pull origin wrong-branch: Fast-forward
c5bc55a HEAD@{1}: checkout: checkout message goes here
```

é‡è¨­åˆ†æ”¯åˆ°ä½ æ‰€éœ€çš„æäº¤(desired commit):

```sh
$ git reset --hard c5bc55a
```

å®Œæˆã€‚

<a href="discard-local-commits"></a>
### æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯èˆ‡é ç¨‹çš„ä¿æŒä¸€è‡´

å…ˆç¢ºèªä½ æ²’æœ‰æ¨(push)ä½ çš„å…§å®¹åˆ°é ç¨‹ã€‚

`git status` æœƒé¡¯ç¤ºä½ é ˜å…ˆ(ahead)æº(origin)å¤šå°‘å€‹æäº¤:

```sh
(my-branch)$ git status
# On branch my-branch
# Your branch is ahead of 'origin/my-branch' by 2 commits.
#   (use "git push" to publish your local commits)
#
```

ä¸€ç¨®æ–¹æ³•æ˜¯:

```sh
(main)$ git reset --hard origin/my-branch
```

<a name="commit-wrong-branch"></a>
### æˆ‘éœ€è¦æäº¤åˆ°ä¸€å€‹æ–°åˆ†æ”¯ï¼Œä½†éŒ¯èª¤çš„æäº¤åˆ°äº†main

åœ¨mainä¸‹å‰µå»ºä¸€å€‹æ–°åˆ†æ”¯ï¼Œä¸åˆ‡æ›åˆ°æ–°åˆ†æ”¯,ä»åœ¨mainä¸‹:

```sh
(main)$ git branch my-branch
```

æŠŠmainåˆ†æ”¯é‡è¨­åˆ°å‰ä¸€å€‹æäº¤:

```sh
(main)$ git reset --hard HEAD^
```

`HEAD^` æ˜¯ `HEAD^1` çš„ç°¡å¯«ï¼Œä½ å¯ä»¥é€éæŒ‡å®šè¦è¨­ç½®çš„`HEAD`ä¾†é€²ä¸€æ­¥é‡è¨­ã€‚

æˆ–è€…, å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ `HEAD^`, æ‰¾åˆ°ä½ æƒ³é‡è¨­åˆ°çš„æäº¤(commit)çš„hash(`git log` èƒ½å¤ å®Œæˆ)ï¼Œ ç„¶å¾Œé‡è¨­åˆ°é€™å€‹hashã€‚ ä½¿ç”¨`git push` åŒæ­¥å…§å®¹åˆ°é ç¨‹ã€‚

ä¾‹å¦‚, mainåˆ†æ”¯æƒ³é‡è¨­åˆ°çš„æäº¤çš„hashç‚º`a13b85e`:

```sh
(main)$ git reset --hard a13b85e
HEAD is now at a13b85e
```

ç°½å‡º(checkout)å‰›æ‰æ–°å»ºçš„åˆ†æ”¯ç¹¼çºŒå·¥ä½œ:

```sh
(main)$ git checkout my-branch
```

<a name="keep-whole-file"></a>
### æˆ‘æƒ³ä¿ç•™ä¾†è‡ªå¦å¤–ä¸€å€‹ref-ishçš„æ•´å€‹æ–‡ä»¶

å‡è¨­ä½ æ­£åœ¨åšä¸€å€‹åŸå‹æ–¹æ¡ˆ(åŸæ–‡ç‚ºworking spike (see note)), æœ‰æˆç™¾çš„å…§å®¹ï¼Œæ¯å€‹éƒ½å·¥ä½œå¾—å¾ˆå¥½ã€‚ç¾åœ¨, ä½ æäº¤åˆ°äº†ä¸€å€‹åˆ†æ”¯ï¼Œä¿å­˜å·¥ä½œå…§å®¹:

```sh
(solution)$ git add -A && git commit -m "Adding all changes from this spike into one big commit."
```

ç•¶ä½ æƒ³è¦æŠŠå®ƒæ”¾åˆ°ä¸€å€‹åˆ†æ”¯è£¡ (å¯èƒ½æ˜¯`feature`, æˆ–è€… `develop`), ä½ é—œå¿ƒæ˜¯ä¿æŒæ•´å€‹æ–‡ä»¶çš„å®Œæ•´ï¼Œä½ æƒ³è¦ä¸€å€‹å¤§çš„æäº¤åˆ†éš”æˆæ¯”è¼ƒå°ã€‚

å‡è¨­ä½ æœ‰:

  * åˆ†æ”¯ `solution`, æ“æœ‰åŸå‹æ–¹æ¡ˆï¼Œ é ˜å…ˆ `develop` åˆ†æ”¯ã€‚
  * åˆ†æ”¯ `develop`, åœ¨é€™è£¡ä½ æ‡‰ç”¨åŸå‹æ–¹æ¡ˆçš„ä¸€äº›å…§å®¹ã€‚

æˆ‘å»å¯ä»¥é€éæŠŠå…§å®¹æ‹¿åˆ°ä½ çš„åˆ†æ”¯è£¡ï¼Œä¾†è§£æ±ºé€™å€‹å•é¡Œ:

```sh
(develop)$ git checkout solution -- file1.txt
```

é€™æœƒæŠŠé€™å€‹æ–‡ä»¶å…§å®¹å¾åˆ†æ”¯ `solution` æ‹¿åˆ°åˆ†æ”¯ `develop` è£¡ä¾†:

```sh
# On branch develop
# Your branch is up-to-date with 'origin/develop'.
# Changes to be committed:
#  (use "git reset HEAD <file>..." to unstage)
#
#        modified:   file1.txt
```

ç„¶å¾Œ, æ­£å¸¸æäº¤ã€‚

Note: Spike solutions are made to analyze or solve the problem. These solutions are used for estimation and discarded once everyone gets clear visualization of the problem. ~ [Wikipedia](https://en.wikipedia.org/wiki/Extreme_programming_practices).

<a name="cherry-pick"></a>
### æˆ‘æŠŠå¹¾å€‹æäº¤(commit)æäº¤åˆ°äº†åŒä¸€å€‹åˆ†æ”¯ï¼Œè€Œé€™äº›æäº¤æ‡‰è©²åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯è£¡

å‡è¨­ä½ æœ‰ä¸€å€‹`main`åˆ†æ”¯ï¼Œ åŸ·è¡Œ`git log`, ä½ çœ‹åˆ°ä½ åšéå…©æ¬¡æäº¤:

```sh
(main)$ git log

commit e3851e817c451cc36f2e6f3049db528415e3c114
Author: Alex Lee <alexlee@example.com>
Date:   Tue Jul 22 15:39:27 2014 -0400

    Bug #21 - Added CSRF protection

commit 5ea51731d150f7ddc4a365437931cd8be3bf3131
Author: Alex Lee <alexlee@example.com>
Date:   Tue Jul 22 15:39:12 2014 -0400

    Bug #14 - Fixed spacing on title

commit a13b85e984171c6e2a1729bb061994525f626d14
Author: Aki Rose <akirose@example.com>
Date:   Tue Jul 21 01:12:48 2014 -0400

    First commit
```

è®“æˆ‘å€‘ç”¨æäº¤hash(commit hash)æ¨™è¨˜bug (`e3851e8` for #21, `5ea5173` for #14).

é¦–å…ˆ, æˆ‘å€‘æŠŠ`main`åˆ†æ”¯é‡è¨­åˆ°æ­£ç¢ºçš„æäº¤(`a13b85e`):

```sh
(main)$ git reset --hard a13b85e
HEAD is now at a13b85e
```

ç¾åœ¨, æˆ‘å€‘å° bug #21 å‰µå»ºä¸€å€‹æ–°çš„åˆ†æ”¯:

```sh
(main)$ git checkout -b 21
(21)$
```

æ¥è‘—, æˆ‘å€‘ç”¨ *cherry-pick* æŠŠå°bug #21çš„æäº¤æ”¾å…¥ç•¶å‰åˆ†æ”¯ã€‚ é€™æ„å‘³è‘—æˆ‘å€‘å°‡æ‡‰ç”¨(apply)é€™å€‹æäº¤(commit)ï¼Œåƒ…åƒ…é€™ä¸€å€‹æäº¤(commit)ï¼Œç›´æ¥åœ¨HEADä¸Šé¢ã€‚

```sh
(21)$ git cherry-pick e3851e8
```

é€™æ™‚å€™, é€™è£¡å¯èƒ½æœƒç”¢ç”Ÿè¡çªï¼Œ åƒè¦‹[äº’å‹•å¼ rebasing ç« ](#interactive-rebase) [**è¡çªç¯€**](#merge-conflict) è§£æ±ºè¡çª.

å†è€…ï¼Œ æˆ‘å€‘ç‚ºbug #14 å‰µå»ºä¸€å€‹æ–°çš„åˆ†æ”¯, ä¹ŸåŸºæ–¼`main`åˆ†æ”¯

```sh
(21)$ git checkout main
(main)$ git checkout -b 14
(14)$
```

æœ€å¾Œ, ç‚º bug #14 åŸ·è¡Œ `cherry-pick`:

```sh
(14)$ git cherry-pick 5ea5173
```

<a name="delete-stale-local-branches"></a>
### æˆ‘æƒ³åˆªé™¤ä¸ŠéŠ(upstream)åˆ†æ”¯è¢«åˆªé™¤äº†çš„æœ¬åœ°åˆ†æ”¯
ä¸€æ—¦ä½ åœ¨github ä¸Šé¢åˆä½µ(merge)äº†ä¸€å€‹pull request, ä½ å°±å¯ä»¥åˆªé™¤ä½ forkè£¡è¢«åˆä½µçš„åˆ†æ”¯ã€‚ å¦‚æœä½ ä¸æº–å‚™ç¹¼çºŒåœ¨é€™å€‹åˆ†æ”¯è£¡å·¥ä½œ, åˆªé™¤é€™å€‹åˆ†æ”¯çš„æœ¬åœ°æ‹·è²æœƒæ›´ä¹¾æ·¨ï¼Œä½¿ä½ ä¸æœƒé™·å…¥å·¥ä½œåˆ†æ”¯å’Œä¸€å †é™³èˆŠåˆ†æ”¯çš„æ··äº‚ä¹‹ä¸­ã€‚

```sh
$ git fetch -p
```

<a name='restore-a-deleted-branch'></a>
### æˆ‘ä¸å°å¿ƒåˆªé™¤äº†æˆ‘çš„åˆ†æ”¯

å¦‚æœä½ å®šæœŸæ¨é€åˆ°é ç¨‹, å¤šæ•¸æƒ…æ³ä¸‹æ‡‰è©²æ˜¯å®‰å…¨çš„ï¼Œä½†æœ‰äº›æ™‚å€™é‚„æ˜¯å¯èƒ½åˆªé™¤äº†é‚„æ²’æœ‰æ¨åˆ°é ç¨‹çš„åˆ†æ”¯ã€‚ è®“æˆ‘å€‘å…ˆå‰µå»ºä¸€å€‹åˆ†æ”¯å’Œä¸€å€‹æ–°çš„æ–‡ä»¶:

```sh
(main)$ git checkout -b my-branch
(my-branch)$ git branch
(my-branch)$ touch foo.txt
(my-branch)$ ls
README.md foo.txt
```

æ·»åŠ æ–‡ä»¶ä¸¦åšä¸€æ¬¡æäº¤

```sh
(my-branch)$ git add .
(my-branch)$ git commit -m 'foo.txt added'
(my-branch)$ foo.txt added
 1 files changed, 1 insertions(+)
 create mode 100644 foo.txt
(my-branch)$ git log

commit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012
Author: siemiatj <siemiatj@example.com>
Date:   Wed Jul 30 00:34:10 2014 +0200

    foo.txt added

commit 69204cdf0acbab201619d95ad8295928e7f411d5
Author: Kate Hudson <katehudson@example.com>
Date:   Tue Jul 29 13:14:46 2014 -0400

    Fixes #6: Force pushing after amending commits
```

ç¾åœ¨æˆ‘å€‘åˆ‡å›åˆ°ä¸»(main)åˆ†æ”¯ï¼Œâ€˜ä¸å°å¿ƒçš„â€™åˆªé™¤`my-branch`åˆ†æ”¯

```sh
(my-branch)$ git checkout main
Switched to branch 'main'
Your branch is up-to-date with 'origin/main'.
(main)$ git branch -D my-branch
Deleted branch my-branch (was 4e3cd85).
(main)$ echo oh noes, deleted my branch!
oh noes, deleted my branch!
```

åœ¨é€™æ™‚å€™ä½ æ‡‰è©²æƒ³èµ·äº†`reflog`, ä¸€å€‹å‡ç´šç‰ˆçš„æ—¥èªŒï¼Œå®ƒå„²å­˜äº†å€‰åº«(repo)è£¡é¢æ‰€æœ‰å‹•ä½œçš„æ­·å²ã€‚

```
(main)$ git reflog
69204cd HEAD@{0}: checkout: moving from my-branch to main
4e3cd85 HEAD@{1}: commit: foo.txt added
69204cd HEAD@{2}: checkout: moving from main to my-branch
```

æ­£å¦‚ä½ æ‰€è¦‹ï¼Œæˆ‘å€‘æœ‰ä¸€å€‹ä¾†è‡ªåˆªé™¤åˆ†æ”¯çš„æäº¤hash(commit hash)ï¼Œæ¥ä¸‹ä¾†çœ‹çœ‹æ˜¯å¦èƒ½æ¢è¦†åˆªé™¤äº†çš„åˆ†æ”¯ã€‚

```sh
(main)$ git checkout -b my-branch-help
Switched to a new branch 'my-branch-help'
(my-branch-help)$ git reset --hard 4e3cd85
HEAD is now at 4e3cd85 foo.txt added
(my-branch-help)$ ls
README.md foo.txt
```

çœ‹! æˆ‘å€‘æŠŠåˆªé™¤çš„æ–‡ä»¶æ‰¾å›ä¾†äº†ã€‚ Gitçš„ `reflog` åœ¨rebasingå‡ºéŒ¯çš„æ™‚å€™ä¹Ÿæ˜¯åŒæ¨£æœ‰ç”¨çš„ã€‚

<a name="i-want-to-delete-a-branch"></a>
### æˆ‘æƒ³åˆªé™¤ä¸€å€‹åˆ†æ”¯

åˆªé™¤ä¸€å€‹é ç¨‹åˆ†æ”¯:

```sh
(main)$ git push origin --delete my-branch
```

ä½ ä¹Ÿå¯ä»¥:

```sh
(main)$ git push origin :my-branch
```

åˆªé™¤ä¸€å€‹æœ¬åœ°åˆ†æ”¯:

```sh
(main)$ git branch -D my-branch
```

<a name="i-want-to-checkout-to-a-remote-branch-that-someone-else-is-working-on"></a>
### æˆ‘æƒ³å¾åˆ¥äººæ­£åœ¨å·¥ä½œçš„é ç¨‹åˆ†æç±¤å‡º(checkout)ä¸€å€‹åˆ†æ”¯

é¦–å…ˆ, å¾é ç¨‹æ‹‰å–(fetch) æ‰€æœ‰åˆ†æ”¯:

```sh
(main)$ git fetch --all
```

å‡è¨­ä½ æƒ³è¦å¾é ç¨‹çš„`daves`åˆ†æç±¤å‡ºåˆ°æœ¬åœ°çš„`daves`

```sh
(main)$ git checkout --track origin/daves
Branch daves set up to track remote branch daves from origin.
Switched to a new branch 'daves'
```

(`--track` æ˜¯ `git checkout -b [branch] [remotename]/[branch]` çš„ç°¡å¯«)

é€™æ¨£å°±å¾—åˆ°äº†ä¸€å€‹`daves`åˆ†æ”¯çš„æœ¬åœ°æ‹·è², ä»»ä½•æ¨é(pushed)çš„æ›´æ–°ï¼Œé ç¨‹éƒ½èƒ½çœ‹åˆ°.

## Rebasing å’Œåˆä½µ(Merging)

<a name="undo-rebase"></a>
### æˆ‘æƒ³æ’¤éŠ·rebase/merge

ä½ å¯ä»¥åˆä½µ(merge)æˆ–rebaseäº†ä¸€å€‹éŒ¯èª¤çš„åˆ†æ”¯, æˆ–è€…å®Œæˆä¸äº†ä¸€å€‹é€²è¡Œä¸­çš„rebase/mergeã€‚ Git åœ¨é€²è¡Œå±éšªæ“ä½œçš„æ™‚å€™æœƒæŠŠåŸå§‹çš„HEADä¿å­˜åœ¨ä¸€å€‹å«ORIG_HEADçš„è®Šæ•¸è£¡, æ‰€ä»¥è¦æŠŠåˆ†æ”¯æ¢è¦†åˆ°rebase/mergeå‰çš„ç‹€æ…‹æ˜¯å¾ˆå®¹æ˜“çš„ã€‚

```sh
(my-branch)$ git reset --hard ORIG_HEAD
```

<a name="force-push-rebase"></a>
### æˆ‘å·²ç¶“rebaseé, ä½†æ˜¯æˆ‘ä¸æƒ³å¼·æ¨(force push)

ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœä½ æƒ³æŠŠé€™äº›è®ŠåŒ–(changes)åæ‡‰åˆ°é ç¨‹åˆ†æ”¯ä¸Šï¼Œä½ å°±å¿…é ˆå¾—å¼·æ¨(force push)ã€‚ æ˜¯å› ä½ å¿«é€²(Fast forward)äº†æäº¤ï¼Œæ”¹è®Šäº†Gitæ­·å², é ç¨‹åˆ†æ”¯ä¸æœƒæ¥å—è®ŠåŒ–(changes)ï¼Œé™¤éå¼·æ¨(force push)ã€‚é€™å°±æ˜¯è¨±å¤šäººä½¿ç”¨ merge å·¥ä½œæµ, è€Œä¸æ˜¯ rebasing å·¥ä½œæµçš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œ é–‹ç™¼è€…çš„å¼·æ¨(force push)æœƒä½¿å¤§çš„åœ˜éšŠé™·å…¥éº»ç…©ã€‚ä½¿ç”¨æ™‚éœ€è¦æ³¨æ„ï¼Œä¸€ç¨®å®‰å…¨ä½¿ç”¨ rebase çš„æ–¹æ³•æ˜¯ï¼Œä¸è¦æŠŠä½ çš„è®ŠåŒ–(changes)åæ˜ åˆ°é ç¨‹åˆ†æ”¯ä¸Š, è€Œæ˜¯æŒ‰ä¸‹é¢çš„åš:

```sh
(main)$ git checkout my-branch
(my-branch)$ git rebase -i main
(my-branch)$ git checkout main
(main)$ git merge --ff-only my-branch
```

æ›´å¤š, åƒè¦‹ [this SO thread](http://stackoverflow.com/questions/11058312/how-can-i-use-git-rebase-without-requiring-a-forced-push).

<a name="interactive-rebase"></a>
### æˆ‘éœ€è¦çµ„åˆ(combine)å¹¾å€‹æäº¤(commit)

å‡è¨­ä½ çš„å·¥ä½œåˆ†æ”¯å°‡æœƒåšå°æ–¼ `main` çš„pull-requestã€‚ ä¸€èˆ¬æƒ…æ³ä¸‹ä½ ä¸é—œå¿ƒæäº¤(commit)çš„æ™‚é–“æˆ³ï¼Œåªæƒ³çµ„åˆ *æ‰€æœ‰* æäº¤(commit) åˆ°ä¸€å€‹å–®ç¨çš„è£¡é¢, ç„¶å¾Œé‡è¨­(reset)é‡æäº¤(recommit)ã€‚ ç¢ºä¿ä¸»(main)åˆ†æ”¯æ˜¯æœ€æ–°çš„å’Œä½ çš„è®ŠåŒ–éƒ½å·²ç¶“æäº¤äº†, ç„¶å¾Œ:

```sh
(my-branch)$ git reset --soft main
(my-branch)$ git commit -am "New awesome feature"
```

å¦‚æœä½ æƒ³è¦æ›´å¤šçš„æ§åˆ¶, æƒ³è¦ä¿ç•™æ™‚é–“æˆ³, ä½ éœ€è¦åšäº’å‹•å¼rebase (interactive rebase):

```sh
(my-branch)$ git rebase -i main
```

å¦‚æœæ²’æœ‰ç›¸å°çš„å…¶å®ƒåˆ†æ”¯ï¼Œ ä½ å°‡ä¸å¾—ä¸ç›¸å°è‡ªå·±çš„`HEAD` é€²è¡Œ rebaseã€‚ ä¾‹å¦‚ï¼šä½ æƒ³çµ„åˆæœ€è¿‘çš„å…©æ¬¡æäº¤(commit), ä½ å°‡ç›¸å°æ–¼`HEAD~2` é€²è¡Œrebaseï¼Œ çµ„åˆæœ€è¿‘3æ¬¡æäº¤(commit), ç›¸å°æ–¼`HEAD~3`, ç­‰ç­‰ã€‚

```sh
(main)$ git rebase -i HEAD~2
```

åœ¨ä½ åŸ·è¡Œäº†äº’å‹•å¼ rebaseçš„å‘½ä»¤(interactive rebase command)å¾Œ, ä½ å°‡åœ¨ä½ çš„ç·¨è¼¯å™¨è£¡çœ‹åˆ°é¡ä¼¼ä¸‹é¢çš„å…§å®¹:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
pick b729ad5 fixup
pick e3851e8 another fix

# Rebase 8074d12..b729ad5 onto 8074d12
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out
```

æ‰€æœ‰ä»¥ `#` é–‹é ­çš„è¡Œéƒ½æ˜¯æ³¨é‡‹, ä¸æœƒå½±éŸ¿ rebase.

ç„¶å¾Œï¼Œä½ å¯ä»¥ç”¨ä»»ä½•ä¸Šé¢å‘½ä»¤åˆ—è¡¨çš„å‘½ä»¤æ›¿æ› `pick`, ä½ ä¹Ÿå¯ä»¥é€éåˆªé™¤å°æ‡‰çš„è¡Œä¾†åˆªé™¤ä¸€å€‹æäº¤(commit)ã€‚

ä¾‹å¦‚, å¦‚æœä½ æƒ³ **å–®ç¨ä¿ç•™æœ€èˆŠ(first)çš„æäº¤(commit),çµ„åˆæ‰€æœ‰å‰©ä¸‹çš„åˆ°ç¬¬äºŒå€‹è£¡é¢**, ä½ å°±æ‡‰è©²ç·¨è¼¯ç¬¬äºŒå€‹æäº¤(commit)å¾Œé¢çš„æ¯å€‹æäº¤(commit) å‰çš„å–®å­—ç‚º `f`:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
f b729ad5 fixup
f e3851e8 another fix
```

å¦‚æœä½ æƒ³çµ„åˆé€™äº›æäº¤(commit) **ä¸¦é‡å‘½åé€™å€‹æäº¤(commit)**, ä½ æ‡‰è©²åœ¨ç¬¬äºŒå€‹æäº¤(commit)æ—é‚Šæ·»åŠ ä¸€å€‹`r`ï¼Œæˆ–è€…æ›´ç°¡å–®çš„ç”¨`s` æ›¿ä»£ `f`:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
s b729ad5 fixup
s e3851e8 another fix
```

ä½ å¯ä»¥åœ¨æ¥ä¸‹ä¾†å½ˆå‡ºçš„æ–‡æœ¬æç¤ºæ¡†è£¡é‡å‘½åæäº¤(commit)ã€‚

```vim
Newer, awesomer features

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# rebase in progress; onto 8074d12
# You are currently editing a commit while rebasing branch 'main' on '8074d12'.
#
# Changes to be committed:
#	modified:   README.md
#

```

å¦‚æœæˆåŠŸäº†, ä½ æ‡‰è©²çœ‹åˆ°é¡ä¼¼ä¸‹é¢çš„å…§å®¹:

```sh
(main)$ Successfully rebased and updated refs/heads/main.
```

#### å®‰å…¨åˆä½µ(merging)ç­–ç•¥
`--no-commit` åŸ·è¡Œåˆä½µ(merge)ä½†ä¸è‡ªå‹•æäº¤, çµ¦ç”¨æˆ¶åœ¨åšæäº¤å‰æª¢æŸ¥å’Œä¿®æ”¹çš„æ©Ÿæœƒã€‚ `no-ff` æœƒç‚ºç‰¹æ€§åˆ†æ”¯(feature branch)çš„å­˜åœ¨éç•™ä¸‹è­‰æ“š, ä¿æŒé …ç›®æ­·å²ä¸€è‡´ã€‚

```sh
(main)$ git merge --no-ff --no-commit my-branch
```

#### æˆ‘éœ€è¦å°‡ä¸€å€‹åˆ†æ”¯åˆä½µæˆä¸€å€‹æäº¤(commit)

```sh
(main)$ git merge --squash my-branch
```

<a name="rebase-unpushed-commits"></a>
#### æˆ‘åªæƒ³çµ„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit)

æœ‰æ™‚å€™ï¼Œåœ¨å°‡æ•¸æ“šæ¨å‘ä¸ŠéŠä¹‹å‰ï¼Œä½ æœ‰å¹¾å€‹æ­£åœ¨é€²è¡Œçš„å·¥ä½œæäº¤(commit)ã€‚é€™æ™‚å€™ä¸å¸Œæœ›æŠŠå·²ç¶“æ¨(push)éçš„çµ„åˆé€²ä¾†ï¼Œå› ç‚ºå…¶ä»–äººå¯èƒ½å·²ç¶“æœ‰æäº¤(commit)å¼•ç”¨å®ƒå€‘äº†ã€‚

```sh
(main)$ git rebase -i @{u}
```

é€™æœƒç”¢ç”Ÿä¸€æ¬¡äº’å‹•å¼çš„rebase(interactive rebase), åªæœƒåˆ—å‡ºæ²’æœ‰æ¨(push)çš„æäº¤(commit)ï¼Œ åœ¨é€™å€‹åˆ—è¡¨æ™‚é€²è¡Œreorder/fix/squash éƒ½æ˜¯å®‰å…¨çš„ã€‚

<a name="check-if-all-commits-on-a-branch-are-merged"></a>
### æª¢æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆä½µ(merge)éäº†

æª¢æŸ¥ä¸€å€‹åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)æ˜¯å¦éƒ½å·²ç¶“åˆä½µ(merge)åˆ°äº†å…¶å®ƒåˆ†æ”¯, ä½ æ‡‰è©²åœ¨é€™äº›åˆ†æ”¯çš„head(æˆ–ä»»ä½• commits)ä¹‹é–“åšä¸€æ¬¡diff:

```sh
(main)$ git log --graph --left-right --cherry-pick --oneline HEAD...feature/120-on-scroll
```

é€™æœƒå‘Šè¨´ä½ åœ¨ä¸€å€‹åˆ†æ”¯è£¡æœ‰è€Œå¦ä¸€å€‹åˆ†æ”¯æ²’æœ‰çš„æ‰€æœ‰æäº¤(commit), å’Œåˆ†æ”¯ä¹‹é–“ä¸å…±äº«çš„æäº¤(commit)çš„åˆ—è¡¨ã€‚ å¦ä¸€å€‹åšæ³•å¯ä»¥æ˜¯:

```sh
(main)$ git log main ^feature/120-on-scroll --no-merges
```

### äº’å‹•å¼rebase(interactive rebase)å¯èƒ½å‡ºç¾çš„å•é¡Œ

<a name="noop"></a>
#### é€™å€‹rebase ç·¨è¼¯è¢å¹•å‡ºç¾'noop'

å¦‚æœä½ çœ‹åˆ°çš„æ˜¯é€™æ¨£:
```
noop
```

é€™æ„å‘³è‘—ä½ rebaseçš„åˆ†æ”¯å’Œç•¶å‰åˆ†æ”¯åœ¨åŒä¸€å€‹æäº¤(commit)ä¸Š, æˆ–è€… *é ˜å…ˆ(ahead)* ç•¶å‰åˆ†æ”¯ã€‚ ä½ å¯ä»¥å˜—è©¦:

* æª¢æŸ¥ç¢ºä¿ä¸»(main)åˆ†æ”¯æ²’æœ‰å•é¡Œ
* rebase  `HEAD~2` æˆ–è€…æ›´æ—©

<a name="merge-conflict"></a>
#### æœ‰è¡çªçš„æƒ…æ³

å¦‚æœä½ ä¸èƒ½æˆåŠŸçš„å®Œæˆrebase, ä½ å¯èƒ½å¿…é ˆè¦è§£æ±ºè¡çªã€‚

é¦–å…ˆåŸ·è¡Œ `git status` æ‰¾å‡ºå“ªäº›æ–‡ä»¶æœ‰è¡çª:

```sh
(my-branch)$ git status
On branch my-branch
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   README.md
```

åœ¨é€™å€‹ä¾‹å­è£¡é¢, `README.md` æœ‰è¡çªã€‚ æ‰“é–‹é€™å€‹æ–‡ä»¶æ‰¾åˆ°é¡ä¼¼ä¸‹é¢çš„å…§å®¹:

```vim
   <<<<<<< HEAD
   some code
   =========
   some code
   >>>>>>> new-commit
```

ä½ éœ€è¦è§£æ±ºæ–°æäº¤çš„ä»£ç¢¼(ç¯„ä¾‹è£¡, å¾ä¸­é–“`==`ç·šåˆ°`new-commit`çš„åœ°æ–¹)èˆ‡`HEAD` ä¹‹é–“ä¸ä¸€æ¨£çš„åœ°æ–¹.

æœ‰æ™‚å€™é€™äº›åˆä¸¦éå¸¸è¤‡é›œï¼Œä½ æ‡‰è©²ä½¿ç”¨å¯è¦–åŒ–çš„å·®ç•°ç·¨è¼¯å™¨(visual diff editor):

```sh
(main*)$ git mergetool -t opendiff
```

åœ¨ä½ è§£æ±ºå®Œæ‰€æœ‰è¡çªå’Œæ¸¬è©¦éå¾Œ, `git add` è®ŠåŒ–äº†çš„(changed)æ–‡ä»¶, ç„¶å¾Œç”¨`git rebase --continue` ç¹¼çºŒrebaseã€‚

```sh
(my-branch)$ git add README.md
(my-branch)$ git rebase --continue
```

å¦‚æœåœ¨è§£æ±ºå®Œæ‰€æœ‰çš„è¡çªéå¾Œï¼Œå¾—åˆ°äº†èˆ‡æäº¤å‰ä¸€æ¨£çš„çµæœ, å¯ä»¥åŸ·è¡Œ`git rebase --skip`ã€‚

ä»»ä½•æ™‚å€™ä½ æƒ³çµæŸæ•´å€‹rebase éç¨‹ï¼Œå›ä¾†rebaseå‰çš„åˆ†æ”¯ç‹€æ…‹, ä½ å¯ä»¥åš:

```sh
(my-branch)$ git rebase --abort
```

<a name="stashing"></a>
## Stash

### æš«å­˜æ‰€æœ‰æ”¹å‹•

æš«å­˜ä½ å·¥ä½œç›®éŒ„ä¸‹çš„æ‰€æœ‰æ”¹å‹•

```sh
$ git stash
```

ä½ å¯ä»¥ä½¿ç”¨`-u`ä¾†æ’é™¤ä¸€äº›æ–‡ä»¶

```sh
$ git stash -u
```

### æš«å­˜æŒ‡å®šæ–‡ä»¶

å‡è¨­ä½ åªæƒ³æš«å­˜æŸä¸€å€‹æ–‡ä»¶

```sh
$ git stash push working-directory-path/filename.ext
```

å‡è¨­ä½ æƒ³æš«å­˜å¤šå€‹æ–‡ä»¶

```sh
$ git stash push working-directory-path/filename1.ext working-directory-path/filename2.ext
```

<a name="stash-msg"></a>
### æš«å­˜æ™‚è¨˜éŒ„æ¶ˆæ¯

é€™æ¨£ä½ å¯ä»¥åœ¨`list`æ™‚çœ‹åˆ°å®ƒ

```sh
$ git stash save <message>
```
æˆ–
```sh
$ git stash push -m <message>
```
<a name="stash-apply-specific"></a>
### ä½¿ç”¨æŸå€‹æŒ‡å®šæš«å­˜

é¦–å…ˆä½ å¯ä»¥æŸ¥çœ‹ä½ çš„`stash`è¨˜éŒ„

```sh
$ git stash list
```

ç„¶å¾Œä½ å¯ä»¥`apply`æŸå€‹`stash`

```sh
$ git stash apply "stash@{n}"
```

æ­¤è™•ï¼Œ 'n'æ˜¯`stash`åœ¨æ£§ä¸­çš„ä½ç½®ï¼Œæœ€ä¸Šå±¤çš„`stash`æœƒæ˜¯0

é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ™‚é–“æ¨™è¨˜(å‡å¦‚ä½ èƒ½è¨˜å¾—çš„è©±)ã€‚

```sh
$ git stash apply "stash@{2.hours.ago}"
```

<a href="stage-and-keep-unstaged"></a>
### æš«å­˜æ™‚ä¿ç•™æœªæš«å­˜çš„å…§å®¹

ä½ éœ€è¦æ‰‹å‹•createä¸€å€‹`stash commit`ï¼Œ ç„¶å¾Œä½¿ç”¨`git stash store`ã€‚

```sh
$ git stash create
$ git stash store -m "commit-message" CREATED_SHA1
```

<a name="miscellaneous-objects"></a>
## é›œé …(Miscellaneous Objects)

<a name="clone-submodules"></a>
### è¤‡è£½æ‰€æœ‰å­æ¨¡çµ„

```sh
$ git clone --recursive git://github.com/foo/bar.git
```

å¦‚æœå·²ç¶“è¤‡è£½äº†:

```sh
$ git submodule update --init --recursive
```

<a name="delete-tag"></a>
### åˆªé™¤æ¨™ç±¤(tag)

```sh
$ git tag -d <tag_name>
$ git push <remote> :refs/tags/<tag_name>
```

<a name="recover-tag"></a>
### æ¢è¦†å·²åˆªé™¤æ¨™ç±¤(tag)

å¦‚æœä½ æƒ³æ¢è¦†ä¸€å€‹å·²åˆªé™¤æ¨™ç±¤(tag), å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥é©Ÿ: é¦–å…ˆ, éœ€è¦æ‰¾åˆ°ç„¡æ³•è¨ªå•çš„æ¨™ç±¤(unreachable tag):

```sh
$ git fsck --unreachable | grep tag
```

è¨˜ä¸‹é€™å€‹æ¨™ç±¤(tag)çš„hashï¼Œç„¶å¾Œç”¨Gitçš„ [update-ref](http://git-scm.com/docs/git-update-ref):

```sh
$ git update-ref refs/tags/<tag_name> <hash>
```

é€™æ™‚ä½ çš„æ¨™ç±¤(tag)æ‡‰è©²å·²ç¶“æ¢è¦†äº†ã€‚

<a name="deleted-patch"></a>
### å·²åˆªé™¤è£œä¸(patch)

å¦‚æœæŸäººåœ¨ GitHub ä¸Šçµ¦ä½ ç™¼äº†ä¸€å€‹pull request, ä½†æ˜¯ç„¶å¾Œä»–åˆªé™¤äº†ä»–è‡ªå·±çš„åŸå§‹ fork, ä½ å°‡æ²’è¾¦æ³•è¤‡è£½ä»–å€‘çš„æäº¤(commit)æˆ–ä½¿ç”¨ `git am`ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹, æœ€å¥½æ‰‹å‹•çš„æŸ¥çœ‹ä»–å€‘çš„æäº¤(commit)ï¼Œä¸¦æŠŠå®ƒå€‘æ‹·è²åˆ°ä¸€å€‹æœ¬åœ°æ–°åˆ†æ”¯ï¼Œç„¶å¾Œåšæäº¤ã€‚

åšå®Œæäº¤å¾Œ, å†ä¿®æ”¹ä½œè€…ï¼Œåƒè¦‹[è®Šæ›´ä½œè€…](#commit-wrong-author)ã€‚ ç„¶å¾Œ, æ‡‰ç”¨è®ŠåŒ–, å†ç™¼èµ·ä¸€å€‹æ–°çš„pull requestã€‚

## è·Ÿè¹¤æ–‡ä»¶(Tracking Files)

<a href="i-want-to-change-a-file-names-capitalization-without-changing-the-contents-of-the-file"></a>
### æˆ‘åªæƒ³æ”¹è®Šä¸€å€‹æª”æ¡ˆåå­—çš„å¤§å°å¯«ï¼Œè€Œä¸ä¿®æ”¹å…§å®¹

```sh
(main)$ git mv --force myfile MyFile
```

<a href="remove-from-git"></a>
### æˆ‘æƒ³å¾Gitåˆªé™¤ä¸€å€‹æ–‡ä»¶ï¼Œä½†ä¿ç•™è©²æ–‡ä»¶

```sh
(main)$ git rm --cached log.txt
```

## é…ç½®(Configuration)

<a name="adding-command-aliases"></a>
### æˆ‘æƒ³çµ¦ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ¥å(alias)

åœ¨ OS X å’Œ Linux ä¸‹, ä½ çš„ Gitçš„é…ç½®æ–‡ä»¶å„²å­˜åœ¨ ```~/.gitconfig```ã€‚æˆ‘åœ¨```[alias]``` éƒ¨åˆ†æ·»åŠ äº†ä¸€äº›å¿«æ·åˆ¥å(å’Œä¸€äº›æˆ‘å®¹æ˜“æ‹¼å¯«éŒ¯èª¤çš„)ï¼Œå¦‚ä¸‹:

```vim
[alias]
    a = add
    amend = commit --amend
    c = commit
    ca = commit --amend
    ci = commit -a
    co = checkout
    d = diff
    dc = diff --changed
    ds = diff --staged
    f = fetch
    loll = log --graph --decorate --pretty=oneline --abbrev-commit
    m = merge
    one = log --pretty=oneline
    outstanding = rebase -i @{u}
    s = status
    unpushed = log @{u}
    wc = whatchanged
    wip = rebase -i @{u}
    zap = fetch -p
```

<a name="credential-helper"></a>
### æˆ‘æƒ³å¿«å–ä¸€å€‹å€‰åº«(repository)çš„ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼

ä½ å¯èƒ½æœ‰ä¸€å€‹å€‰åº«éœ€è¦æˆæ¬Šï¼Œé€™æ™‚ä½ å¯ä»¥å¿«å–ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼ï¼Œè€Œä¸ç”¨æ¯æ¬¡æ¨/æ‹‰(push/pull)çš„æ™‚å€™éƒ½è¼¸å…¥ï¼ŒCredential helperèƒ½å¹«ä½ ã€‚

```sh
$ git config --global credential.helper cache
# Set git to use the credential memory cache
```

```sh
$ git config --global credential.helper 'cache --timeout=3600'
# Set the cache to timeout after 1 hour (setting is in seconds)
```

<a href="#ive-no-idea-what-i-did-wrong"></a>
## æˆ‘ä¸çŸ¥é“æˆ‘åšéŒ¯äº†äº›ä»€éº¼

ä½ æŠŠäº‹æƒ…æç ¸äº†ï¼šä½  `é‡è¨­(reset)` äº†ä¸€äº›æ±è¥¿, æˆ–è€…ä½ åˆä½µäº†éŒ¯èª¤çš„åˆ†æ”¯, äº¦æˆ–ä½ å¼·æ¨äº†å¾Œæ‰¾ä¸åˆ°ä½ è‡ªå·±çš„æäº¤(commit)äº†ã€‚æœ‰äº›æ™‚å€™, ä½ ä¸€ç›´éƒ½åšå¾—å¾ˆå¥½, ä½†ä½ æƒ³å›åˆ°ä»¥å‰çš„æŸå€‹ç‹€æ…‹ã€‚

é€™å°±æ˜¯ `git reflog` çš„ç›®çš„ï¼Œ `reflog` è¨˜éŒ„å°åˆ†æ”¯é ‚ç«¯(the tip of a branch)çš„ä»»ä½•æ”¹è®Š, å³ä½¿é‚£å€‹é ‚ç«¯æ²’æœ‰è¢«ä»»ä½•åˆ†æ”¯æˆ–æ¨™ç±¤å¼•ç”¨ã€‚åŸºæœ¬ä¸Š, æ¯æ¬¡HEADçš„æ”¹è®Š, ä¸€æ¢æ–°çš„ç´€éŒ„å°±æœƒå¢åŠ åˆ°`reflog`ã€‚éºæ†¾çš„æ˜¯ï¼Œé€™åªå°æœ¬åœ°åˆ†æ”¯èµ·ä½œç”¨ï¼Œä¸”å®ƒåªè·Ÿè¹¤å‹•ä½œ (ä¾‹å¦‚ï¼Œä¸æœƒè·Ÿè¹¤ä¸€å€‹æ²’æœ‰è¢«è¨˜éŒ„çš„æ–‡ä»¶çš„ä»»ä½•æ”¹è®Š)ã€‚

```sh
(main)$ git reflog
0a2e358 HEAD@{0}: reset: moving to HEAD~2
0254ea7 HEAD@{1}: checkout: moving from 2.2 to main
c10f740 HEAD@{2}: checkout: moving from main to 2.2
```

ä¸Šé¢çš„reflogå±•ç¤ºäº†å¾mainåˆ†æç±¤å‡º(checkout)åˆ°2.2 åˆ†æ”¯ï¼Œç„¶å¾Œå†ç°½å›ã€‚ é‚£è£¡ï¼Œé‚„æœ‰ä¸€å€‹ç¡¬é‡è¨­(hard reset)åˆ°ä¸€å€‹è¼ƒèˆŠçš„æäº¤ã€‚æœ€æ–°çš„å‹•ä½œå‡ºç¾åœ¨æœ€ä¸Šé¢ä»¥ `HEAD@{0}`æ¨™è­˜.

å¦‚æœäº‹å¯¦è­‰æ˜ä½ ä¸å°å¿ƒå›ç§»(move back)äº†æäº¤(commit), reflog æœƒåŒ…å«ä½ ä¸å°å¿ƒå›ç§»å‰mainä¸ŠæŒ‡å‘çš„æäº¤(0254ea7)ã€‚

```sh
$ git reset --hard 0254ea7
```

ç„¶å¾Œä½¿ç”¨git resetå°±å¯ä»¥æŠŠmainæ”¹å›åˆ°ä¹‹å‰çš„commitï¼Œé€™æä¾›äº†ä¸€å€‹åœ¨æ­·å²è¢«æ„å¤–æ›´æ”¹æƒ…æ³ä¸‹çš„å®‰å…¨ç¶²ã€‚

([æ‘˜è‡ª](https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog)).

# å…¶å®ƒè³‡æº(Other Resources)

## æ›¸(Books)

* [Pro Git](https://git-scm.com/book/en/v2) - Scott Chacon's excellent git book
* [Git Internals](https://github.com/pluralsight/git-internals-pdf) - Scott Chacon's other excellent git book

## æ•™å­¸(Tutorials)

* [Learn Git branching](https://learngitbranching.js.org/) ä¸€å€‹åŸºæ–¼ç¶²é çš„äº’å‹•å¼ branching/merging/rebasing æ•™å­¸
* [Getting solid at Git rebase vs. merge](https://medium.com/@porteneuve/getting-solid-at-git-rebase-vs-merge-4fa1a48c53aa)
* [git-workflow](https://github.com/asmeurer/git-workflow) - [Aaron Meurer](https://github.com/asmeurer)çš„æ€éº¼ä½¿ç”¨Gitç‚ºé–‹æºå€‰åº«è²¢ç»
* [GitHub as a workflow](http://hugogiraudel.com/2015/08/13/github-as-a-workflow/) - ä½¿ç”¨GitHubåšç‚ºå·¥ä½œæµçš„è¶£äº‹, å°¤å…¶æ˜¯ç©ºPRs

## è…³æœ¬å’Œå·¥å…·(Scripts and Tools)

* [firstaidgit.io](http://firstaidgit.io/) ä¸€å€‹å¯æœç´¢çš„æœ€å¸¸è¢«å•åˆ°çš„Gitçš„å•é¡Œ
* [git-extra-commands](https://github.com/unixorn/git-extra-commands) - ä¸€å †æœ‰ç”¨çš„é¡å¤–çš„Gitè…³æœ¬
* [git-extras](https://github.com/tj/git-extras) - GIT å·¥å…·é›† -- repo summary, repl, changelog population, author commit percentages and more
* [git-fire](https://github.com/qw3rtman/git-fire) - git-fire æ˜¯ä¸€å€‹ Git æ’ä»¶ï¼Œç”¨æ–¼å¹«åŠ©åœ¨ç·Šæ€¥æƒ…æ³ä¸‹æ·»åŠ æ‰€æœ‰ç•¶å‰æ–‡ä»¶, åšæäº¤(committing), å’Œæ¨(push)åˆ°ä¸€å€‹æ–°åˆ†æ”¯(é˜»æ­¢åˆä½µè¡çª)ã€‚
* [git-tips](https://github.com/git-tips/tips) - Gitå°æç¤º
* [git-town](https://github.com/Originate/git-town) - é€šç”¨ï¼Œé«˜ç´šGitå·¥ä½œæµæ”¯æŒï¼ http://www.git-town.com

## GUIç”¨æˆ¶ç«¯(GUI Clients)
* [GitKraken](https://www.gitkraken.com/) - è±ªè¯çš„Gitç”¨æˆ¶ç«¯ Windows, Mac & Linux
* [git-cola](https://git-cola.github.io/) - å¦å¤–ä¸€å€‹Gitç”¨æˆ¶ç«¯ Windows & OS X
* [GitUp](https://github.com/git-up/GitUp) - ä¸€å€‹æ–°çš„Gitç”¨æˆ¶ç«¯ï¼Œåœ¨è™•ç†Gitçš„è¤‡é›œæ€§ä¸Šæœ‰è‡ªå·±çš„ç‰¹é»
* [gitx-dev](https://rowanj.github.io/gitx/) - åœ–å½¢åŒ–çš„Gitç”¨æˆ¶ç«¯ OS X
* [Source Tree](https://www.sourcetreeapp.com/) - å…è²»çš„åœ–å½¢åŒ–Gitç”¨æˆ¶ç«¯ Windows & OS X
* [Tower](http://www.git-tower.com/) - åœ–å½¢åŒ–Gitç”¨æˆ¶ç«¯ OS X(ä»˜è²»)
