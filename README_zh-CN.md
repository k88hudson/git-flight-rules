# Gité£è¡Œè§„åˆ™(Flight Rules)

ğŸŒ
*[English](README.md) âˆ™ [EspaÃ±ol](README_es.md)  âˆ™  [Ğ ÑƒÑÑĞºĞ¸Ğ¹](README_ru.md) âˆ™ [ç®€ä½“ä¸­æ–‡](README_zh-CN.md)âˆ™ [í•œêµ­ì–´](README_kr.md)  âˆ™  [Tiáº¿ng Viá»‡t](README_vi.md) âˆ™ [FranÃ§ais](README_fr.md) âˆ™ [æ—¥æœ¬èª](README_ja.md)*

#### å‰è¨€

- è‹±æ–‡åŸç‰ˆ[README](https://github.com/k88hudson/git-flight-rules/blob/master/README.md)
- ç¿»è¯‘å¯èƒ½å­˜åœ¨é”™è¯¯æˆ–ä¸æ ‡å‡†çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡æ­£å’Œä¿®æ”¹ï¼Œè°¢è°¢ï¼

#### ä»€ä¹ˆæ˜¯"é£è¡Œè§„åˆ™"?

è¿™æ˜¯ä¸€ç¯‡ç»™å®‡èˆªå‘˜ï¼ˆè¿™é‡Œå°±æ˜¯æŒ‡ä½¿ç”¨Gitçš„ç¨‹åºå‘˜ä»¬ï¼‰çš„æŒ‡å—ï¼Œç”¨æ¥æŒ‡å¯¼é—®é¢˜å‡ºç°åçš„åº”å¯¹ä¹‹æ³•ã€‚

>  *é£è¡Œè§„åˆ™(Flight Rules)* æ˜¯è®°å½•åœ¨æ‰‹å†Œä¸Šçš„æ¥ä¹‹ä¸æ˜“çš„ä¸€ç³»åˆ—çŸ¥è¯†ï¼Œè®°å½•äº†æŸä¸ªäº‹æƒ…å‘ç”Ÿçš„åŸå› ï¼Œä»¥åŠæ€æ ·ä¸€æ­¥ä¸€æ­¥çš„è¿›è¡Œå¤„ç†ã€‚æœ¬è´¨ä¸Š, å®ƒä»¬æ˜¯ç‰¹å®šåœºæ™¯çš„éå¸¸è¯¦ç»†çš„æ ‡å‡†å¤„ç†æµç¨‹ã€‚ [...]

> è‡ª20ä¸–çºª60å¹´ä»£åˆä»¥æ¥ï¼ŒNASAä¸€ç›´åœ¨æ•æ‰(capturing)æˆ‘ä»¬çš„å¤±è¯¯ï¼Œç¾éš¾å’Œè§£å†³æ–¹æ¡ˆ, å½“æ—¶æ°´æ˜Ÿæ—¶ä»£(Mercury-era)çš„åœ°é¢å°ç»„é¦–å…ˆå¼€å§‹å°†â€œç»éªŒæ•™è®­â€æ”¶é›†åˆ°ä¸€ä¸ªçº²è¦(compendium)ä¸­ï¼Œè¯¥çº²ç°åœ¨å·²ç»æœ‰ä¸Šåƒä¸ªé—®é¢˜æƒ…æ™¯ï¼Œä»å‘åŠ¨æœºæ•…éšœåˆ°ç ´æŸçš„èˆ±å£æŠŠæ‰‹åˆ°è®¡ç®—æœºæ•…éšœï¼Œä»¥åŠå®ƒä»¬å¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚

&mdash; Chris Hadfield, *ä¸€ä¸ªå®‡èˆªå‘˜çš„ç”Ÿæ´»æŒ‡å—(An Astronaut's Guide to Life)*ã€‚

#### è¿™ç¯‡æ–‡ç« çš„çº¦å®š

ä¸ºäº†æ¸…æ¥šçš„è¡¨è¿°ï¼Œè¿™ç¯‡æ–‡æ¡£é‡Œçš„æ‰€æœ‰ä¾‹å­ä½¿ç”¨äº†è‡ªå®šä¹‰çš„bash æç¤ºï¼Œä»¥ä¾¿æŒ‡ç¤ºå½“å‰åˆ†æ”¯å’Œæ˜¯å¦æœ‰æš‚å­˜çš„å˜åŒ–(changes)ã€‚åˆ†æ”¯åç”¨å°æ‹¬å·æ‹¬èµ·æ¥ï¼Œåˆ†æ”¯ååé¢è·Ÿçš„`*`è¡¨ç¤ºæš‚å­˜çš„å˜åŒ–(changes)ã€‚

[![Join the chat at https://gitter.im/k88hudson/git-flight-rules](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/k88hudson/git-flight-rules?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

  - [ç¼–è¾‘æäº¤(editting commits)](#%E7%BC%96%E8%BE%91%E6%8F%90%E4%BA%A4editting-commits)
    - [æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ?](#%E6%88%91%E5%88%9A%E6%89%8D%E6%8F%90%E4%BA%A4%E4%BA%86%E4%BB%80%E4%B9%88)
    - [æˆ‘çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº†](#%E6%88%91%E7%9A%84%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AFcommit-message%E5%86%99%E9%94%99%E4%BA%86)
    - [æˆ‘æäº¤(commit)é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹](#%E6%88%91%E6%8F%90%E4%BA%A4commit%E9%87%8C%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E9%82%AE%E7%AE%B1%E4%B8%8D%E5%AF%B9)
    - [æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BB%8E%E4%B8%80%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E9%87%8C%E7%A7%BB%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6)
    - [æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤(commit)](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E6%88%91%E7%9A%84%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E6%AC%A1%E6%8F%90%E4%BA%A4commit)
    - [åˆ é™¤ä»»æ„æäº¤(commit)](#%E5%88%A0%E9%99%A4%E4%BB%BB%E6%84%8F%E6%8F%90%E4%BA%A4commit)
    - [æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤(amended commit)åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š](#%E6%88%91%E5%B0%9D%E8%AF%95%E6%8E%A8%E4%B8%80%E4%B8%AA%E4%BF%AE%E6%AD%A3%E5%90%8E%E7%9A%84%E6%8F%90%E4%BA%A4amended-commit%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BD%86%E6%98%AF%E6%8A%A5%E9%94%99)
    - [æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹](#%E6%88%91%E6%84%8F%E5%A4%96%E7%9A%84%E5%81%9A%E4%BA%86%E4%B8%80%E6%AC%A1%E7%A1%AC%E9%87%8D%E7%BD%AEhard-reset%E6%88%91%E6%83%B3%E6%89%BE%E5%9B%9E%E6%88%91%E7%9A%84%E5%86%85%E5%AE%B9)
  - [æš‚å­˜(Staging)](#%E6%9A%82%E5%AD%98staging)
    - [æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E6%8A%8A%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E6%B7%BB%E5%8A%A0%E5%88%B0%E4%B8%8A%E4%B8%80%E6%AC%A1%E7%9A%84%E6%8F%90%E4%BA%A4commit)
    - [æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨](#%E6%88%91%E6%83%B3%E8%A6%81%E6%9A%82%E5%AD%98%E4%B8%80%E4%B8%AA%E6%96%B0%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E8%80%8C%E4%B8%8D%E6%98%AF%E8%BF%99%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E5%85%A8%E9%83%A8)
    - [æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–(changes)åŠ åˆ°ä¸¤ä¸ªæäº¤(commit)é‡Œ](#%E6%88%91%E6%83%B3%E6%8A%8A%E5%9C%A8%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E9%87%8C%E7%9A%84%E5%8F%98%E5%8C%96changes%E5%8A%A0%E5%88%B0%E4%B8%A4%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E9%87%8C)
    - [æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E5%8F%98%E6%88%90%E6%9C%AA%E6%9A%82%E5%AD%98%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E6%9A%82%E5%AD%98%E8%B5%B7%E6%9D%A5)
  - [æœªæš‚å­˜(Unstaged)çš„å†…å®¹](#%E6%9C%AA%E6%9A%82%E5%AD%98unstaged%E7%9A%84%E5%86%85%E5%AE%B9)
    - [æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E7%A7%BB%E5%8A%A8%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯](#%E6%88%91%E6%83%B3%E6%8A%8A%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9%E7%A7%BB%E5%8A%A8%E5%88%B0%E5%8F%A6%E4%B8%80%E4%B8%AA%E5%B7%B2%E5%AD%98%E5%9C%A8%E7%9A%84%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–(uncommitted changes)](#%E6%88%91%E6%83%B3%E4%B8%A2%E5%BC%83%E6%9C%AC%E5%9C%B0%E6%9C%AA%E6%8F%90%E4%BA%A4%E7%9A%84%E5%8F%98%E5%8C%96uncommitted-changes)
    - [æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹](#%E6%88%91%E6%83%B3%E4%B8%A2%E5%BC%83%E6%9F%90%E4%BA%9B%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9)
  - [åˆ†æ”¯(Branches)](#%E5%88%86%E6%94%AFbranches)
    - [æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯](#%E6%88%91%E4%BB%8E%E9%94%99%E8%AF%AF%E7%9A%84%E5%88%86%E6%94%AF%E6%8B%89%E5%8F%96%E4%BA%86%E5%86%85%E5%AE%B9%E6%88%96%E6%8A%8A%E5%86%85%E5%AE%B9%E6%8B%89%E5%8F%96%E5%88%B0%E4%BA%86%E9%94%99%E8%AF%AF%E7%9A%84%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´](#%E6%88%91%E6%83%B3%E6%89%94%E6%8E%89%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%8F%90%E4%BA%A4commit%E4%BB%A5%E4%BE%BF%E6%88%91%E7%9A%84%E5%88%86%E6%94%AF%E4%B8%8E%E8%BF%9C%E7%A8%8B%E7%9A%84%E4%BF%9D%E6%8C%81%E4%B8%80%E8%87%B4)
    - [æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†main](#%E6%88%91%E9%9C%80%E8%A6%81%E6%8F%90%E4%BA%A4%E5%88%B0%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%86%E6%94%AF%E4%BD%86%E9%94%99%E8%AF%AF%E7%9A%84%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BA%86main)
    - [æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BF%9D%E7%95%99%E6%9D%A5%E8%87%AA%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AAref-ish%E7%9A%84%E6%95%B4%E4%B8%AA%E6%96%87%E4%BB%B6)
    - [æˆ‘æŠŠå‡ ä¸ªæäº¤(commit)æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ](#%E6%88%91%E6%8A%8A%E5%87%A0%E4%B8%AA%E6%8F%90%E4%BA%A4commit%E6%8F%90%E4%BA%A4%E5%88%B0%E4%BA%86%E5%90%8C%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E8%80%8C%E8%BF%99%E4%BA%9B%E6%8F%90%E4%BA%A4%E5%BA%94%E8%AF%A5%E5%88%86%E5%B8%83%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%9A%84%E5%88%86%E6%94%AF%E9%87%8C)
    - [æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸(upstream)åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E4%B8%8A%E6%B8%B8upstream%E5%88%86%E6%94%AF%E8%A2%AB%E5%88%A0%E9%99%A4%E4%BA%86%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%88%86%E6%94%AF)
    - [æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯](#%E6%88%91%E4%B8%8D%E5%B0%8F%E5%BF%83%E5%88%A0%E9%99%A4%E4%BA%86%E6%88%91%E7%9A%84%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯](#%E6%88%91%E6%83%B3%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF)
    - [æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º(checkout)ä¸€ä¸ªåˆ†æ”¯](#%E6%88%91%E6%83%B3%E4%BB%8E%E5%88%AB%E4%BA%BA%E6%AD%A3%E5%9C%A8%E5%B7%A5%E4%BD%9C%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E7%AD%BE%E5%87%BAcheckout%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF)
  - [Rebasing å’Œåˆå¹¶(Merging)](#rebasing-%E5%92%8C%E5%90%88%E5%B9%B6merging)
    - [æˆ‘æƒ³æ’¤é”€rebase/merge](#%E6%88%91%E6%83%B3%E6%92%A4%E9%94%80rebasemerge)
    - [æˆ‘å·²ç»rebaseè¿‡, ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨(force push)](#%E6%88%91%E5%B7%B2%E7%BB%8Frebase%E8%BF%87-%E4%BD%86%E6%98%AF%E6%88%91%E4%B8%8D%E6%83%B3%E5%BC%BA%E6%8E%A8force-push)
    - [æˆ‘éœ€è¦ç»„åˆ(combine)å‡ ä¸ªæäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E7%BB%84%E5%90%88combine%E5%87%A0%E4%B8%AA%E6%8F%90%E4%BA%A4commit)
      - [å®‰å…¨åˆå¹¶(merging)ç­–ç•¥](#%E5%AE%89%E5%85%A8%E5%90%88%E5%B9%B6merging%E7%AD%96%E7%95%A5)
      - [æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤(commit)](#%E6%88%91%E9%9C%80%E8%A6%81%E5%B0%86%E4%B8%80%E4%B8%AA%E5%88%86%E6%94%AF%E5%90%88%E5%B9%B6%E6%88%90%E4%B8%80%E4%B8%AA%E6%8F%90%E4%BA%A4commit)
      - [æˆ‘åªæƒ³ç»„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit)](#%E6%88%91%E5%8F%AA%E6%83%B3%E7%BB%84%E5%90%88combine%E6%9C%AA%E6%8E%A8%E7%9A%84%E6%8F%90%E4%BA%A4unpushed-commit)
    - [æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆå¹¶(merge)è¿‡äº†](#%E6%A3%80%E6%9F%A5%E6%98%AF%E5%90%A6%E5%88%86%E6%94%AF%E4%B8%8A%E7%9A%84%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4commit%E9%83%BD%E5%90%88%E5%B9%B6merge%E8%BF%87%E4%BA%86)
    - [äº¤äº’å¼rebase(interactive rebase)å¯èƒ½å‡ºç°çš„é—®é¢˜](#%E4%BA%A4%E4%BA%92%E5%BC%8Frebaseinteractive-rebase%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98)
      - [è¿™ä¸ªrebase ç¼–è¾‘å±å¹•å‡ºç°'noop'](#%E8%BF%99%E4%B8%AArebase-%E7%BC%96%E8%BE%91%E5%B1%8F%E5%B9%95%E5%87%BA%E7%8E%B0noop)
      - [æœ‰å†²çªçš„æƒ…å†µ](#%E6%9C%89%E5%86%B2%E7%AA%81%E7%9A%84%E6%83%85%E5%86%B5)
  - [Stash](#stash)
    - [æš‚å­˜æ‰€æœ‰æ”¹åŠ¨](#%E6%9A%82%E5%AD%98%E6%89%80%E6%9C%89%E6%94%B9%E5%8A%A8)
    - [æš‚å­˜æŒ‡å®šæ–‡ä»¶](#%E6%9A%82%E5%AD%98%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6)
    - [æš‚å­˜æ—¶è®°å½•æ¶ˆæ¯](#%E6%9A%82%E5%AD%98%E6%97%B6%E8%AE%B0%E5%BD%95%E6%B6%88%E6%81%AF)
    - [ä½¿ç”¨æŸä¸ªæŒ‡å®šæš‚å­˜](#%E4%BD%BF%E7%94%A8%E6%9F%90%E4%B8%AA%E6%8C%87%E5%AE%9A%E6%9A%82%E5%AD%98)
    - [æš‚å­˜æ—¶ä¿ç•™æœªæš‚å­˜çš„å†…å®¹](#%E6%9A%82%E5%AD%98%E6%97%B6%E4%BF%9D%E7%95%99%E6%9C%AA%E6%9A%82%E5%AD%98%E7%9A%84%E5%86%85%E5%AE%B9)
  - [æ‚é¡¹(Miscellaneous Objects)](#%E6%9D%82%E9%A1%B9miscellaneous-objects)
    - [å…‹éš†æ‰€æœ‰å­æ¨¡å—](#%E5%85%8B%E9%9A%86%E6%89%80%E6%9C%89%E5%AD%90%E6%A8%A1%E5%9D%97)
    - [åˆ é™¤æ ‡ç­¾(tag)](#%E5%88%A0%E9%99%A4%E6%A0%87%E7%AD%BEtag)
    - [æ¢å¤å·²åˆ é™¤æ ‡ç­¾(tag)](#%E6%81%A2%E5%A4%8D%E5%B7%B2%E5%88%A0%E9%99%A4%E6%A0%87%E7%AD%BEtag)
    - [å·²åˆ é™¤è¡¥ä¸(patch)](#%E5%B7%B2%E5%88%A0%E9%99%A4%E8%A1%A5%E4%B8%81patch)
  - [è·Ÿè¸ªæ–‡ä»¶(Tracking Files)](#%E8%B7%9F%E8%B8%AA%E6%96%87%E4%BB%B6tracking-files)
    - [æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹](#%E6%88%91%E5%8F%AA%E6%83%B3%E6%94%B9%E5%8F%98%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E5%90%8D%E5%AD%97%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99%E8%80%8C%E4%B8%8D%E4%BF%AE%E6%94%B9%E5%86%85%E5%AE%B9)
    - [æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶](#%E6%88%91%E6%83%B3%E4%BB%8Egit%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6%E4%BD%86%E4%BF%9D%E7%95%99%E8%AF%A5%E6%96%87%E4%BB%B6)
  - [é…ç½®(Configuration)](#%E9%85%8D%E7%BD%AEconfiguration)
    - [æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å(alias)](#%E6%88%91%E6%83%B3%E7%BB%99%E4%B8%80%E4%BA%9Bgit%E5%91%BD%E4%BB%A4%E6%B7%BB%E5%8A%A0%E5%88%AB%E5%90%8Dalias)
    - [æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“(repository)çš„ç”¨æˆ·åå’Œå¯†ç ](#%E6%88%91%E6%83%B3%E7%BC%93%E5%AD%98%E4%B8%80%E4%B8%AA%E4%BB%93%E5%BA%93repository%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81)
  - [æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ](#%E6%88%91%E4%B8%8D%E7%9F%A5%E9%81%93%E6%88%91%E5%81%9A%E9%94%99%E4%BA%86%E4%BA%9B%E4%BB%80%E4%B9%88)
- [å…¶å®ƒèµ„æº(Other Resources)](#%E5%85%B6%E5%AE%83%E8%B5%84%E6%BA%90other-resources)
  - [ä¹¦(Books)](#%E4%B9%A6books)
  - [æ•™ç¨‹(Tutorials)](#%E6%95%99%E7%A8%8Btutorials)
  - [è„šæœ¬å’Œå·¥å…·(Scripts and Tools)](#%E8%84%9A%E6%9C%AC%E5%92%8C%E5%B7%A5%E5%85%B7scripts-and-tools)
  - [GUIå®¢æˆ·ç«¯(GUI Clients)](#gui%E5%AE%A2%E6%88%B7%E7%AB%AFgui-clients)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## ç¼–è¾‘æäº¤(editting commits)

<a name="diff-last"></a>
### æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ?

å¦‚æœä½ ç”¨ `git commit -a` æäº¤äº†ä¸€æ¬¡å˜åŒ–(changes)ï¼Œè€Œä½ åˆä¸ç¡®å®šåˆ°åº•è¿™æ¬¡æäº¤äº†å“ªäº›å†…å®¹ã€‚ ä½ å°±å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ˜¾ç¤ºå½“å‰`HEAD`ä¸Šçš„æœ€è¿‘ä¸€æ¬¡çš„æäº¤(commit):

```sh
(main)$ git show
```

æˆ–è€…

```sh
$ git log -n1 -p
```

<a name="#i-wrote-the-wrong-thing-in-a-commit-message"></a>
### æˆ‘çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº†

å¦‚æœä½ çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº†ä¸”è¿™æ¬¡æäº¤(commit)è¿˜æ²¡æœ‰æ¨(push), ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•æ¥ä¿®æ”¹æäº¤ä¿¡æ¯(commit message):

```sh
$ git commit --amend --only
```
è¿™ä¼šæ‰“å¼€ä½ çš„é»˜è®¤ç¼–è¾‘å™¨, åœ¨è¿™é‡Œä½ å¯ä»¥ç¼–è¾‘ä¿¡æ¯. å¦ä¸€æ–¹é¢, ä½ ä¹Ÿå¯ä»¥ç”¨ä¸€æ¡å‘½ä»¤ä¸€æ¬¡å®Œæˆ:

```sh
$ git commit --amend --only -m 'xxxxxxx'
```

å¦‚æœä½ å·²ç»æ¨(push)äº†è¿™æ¬¡æäº¤(commit), ä½ å¯ä»¥ä¿®æ”¹è¿™æ¬¡æäº¤(commit)ç„¶åå¼ºæ¨(force push), ä½†æ˜¯ä¸æ¨èè¿™ä¹ˆåšã€‚

<a name="commit-wrong-author"></a>
### æˆ‘æäº¤(commit)é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹

å¦‚æœè¿™åªæ˜¯å•ä¸ªæäº¤(commit)ï¼Œä¿®æ”¹å®ƒï¼š

```sh
$ git commit --amend --author "New Authorname <authoremail@mydomain.com>"
```

å¦‚æœä½ éœ€è¦ä¿®æ”¹æ‰€æœ‰å†å², å‚è€ƒ 'git filter-branch'çš„æŒ‡å—é¡µ.

<a href="#i-want-to-remove-a-file-from-a-commit"></a>
### æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶

é€šè¿‡ä¸‹é¢çš„æ–¹æ³•ï¼Œä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶:

```sh
$ git checkout HEAD^ myfile
$ git add -A
$ git commit --amend
```

è¿™å°†éå¸¸æœ‰ç”¨ï¼Œå½“ä½ æœ‰ä¸€ä¸ªå¼€æ”¾çš„è¡¥ä¸(open patch)ï¼Œä½ å¾€ä¸Šé¢æäº¤äº†ä¸€ä¸ªä¸å¿…è¦çš„æ–‡ä»¶ï¼Œä½ éœ€è¦å¼ºæ¨(force push)å»æ›´æ–°è¿™ä¸ªè¿œç¨‹è¡¥ä¸ã€‚

<a name="delete-pushed-commit"></a>
### æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤(commit)

å¦‚æœä½ éœ€è¦åˆ é™¤æ¨äº†çš„æäº¤(pushed commits)ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚å¯æ˜¯ï¼Œè¿™ä¼šä¸å¯é€†çš„æ”¹å˜ä½ çš„å†å²ï¼Œä¹Ÿä¼šæä¹±é‚£äº›å·²ç»ä»è¯¥ä»“åº“æ‹‰å–(pulled)äº†çš„äººçš„å†å²ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœä½ ä¸æ˜¯å¾ˆç¡®å®šï¼Œåƒä¸‡ä¸è¦è¿™ä¹ˆåšã€‚

```sh
$ git reset HEAD^ --hard
$ git push -f [remote] [branch]
```

å¦‚æœä½ è¿˜æ²¡æœ‰æ¨åˆ°è¿œç¨‹, æŠŠGité‡ç½®(reset)åˆ°ä½ æœ€åä¸€æ¬¡æäº¤å‰çš„çŠ¶æ€å°±å¯ä»¥äº†(åŒæ—¶ä¿å­˜æš‚å­˜çš„å˜åŒ–):

```
(my-branch*)$ git reset --soft HEAD@{1}

```

è¿™åªèƒ½åœ¨æ²¡æœ‰æ¨é€ä¹‹å‰æœ‰ç”¨. å¦‚æœä½ å·²ç»æ¨äº†, å”¯ä¸€å®‰å…¨èƒ½åšçš„æ˜¯ `git revert SHAofBadCommit`ï¼Œ é‚£ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤(commit)ç”¨äºæ’¤æ¶ˆå‰ä¸€ä¸ªæäº¤çš„æ‰€æœ‰å˜åŒ–(changes)ï¼› æˆ–è€…, å¦‚æœä½ æ¨çš„è¿™ä¸ªåˆ†æ”¯æ˜¯rebase-safeçš„ (ä¾‹å¦‚ï¼š å…¶å®ƒå¼€å‘è€…ä¸ä¼šä»è¿™ä¸ªåˆ†æ”¯æ‹‰), åªéœ€è¦ä½¿ç”¨ `git push -f`ï¼› æ›´å¤š, è¯·å‚è€ƒ [the above section](#deleteremove-last-pushed-commit)ã€‚

<a name="delete-any-commit"></a>
### åˆ é™¤ä»»æ„æäº¤(commit)

åŒæ ·çš„è­¦å‘Šï¼šä¸åˆ°ä¸‡ä¸å¾—å·²çš„æ—¶å€™ä¸è¦è¿™ä¹ˆåš.

```sh
$ git rebase --onto SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT
$ git push -f [remote] [branch]
```

æˆ–è€…åšä¸€ä¸ª [äº¤äº’å¼rebase](#interactive-rebase) åˆ é™¤é‚£äº›ä½ æƒ³è¦åˆ é™¤çš„æäº¤(commit)é‡Œæ‰€å¯¹åº”çš„è¡Œã€‚

<a name="#force-push"></a>
### æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤(amended commit)åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š

```sh
To https://github.com/yourusername/repo.git
! [rejected]        mybranch -> mybranch (non-fast-forward)
error: failed to push some refs to 'https://github.com/tanay1337/webmaker.org.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
```

æ³¨æ„, rebasing(è§ä¸‹é¢)å’Œä¿®æ­£(amending)ä¼šç”¨ä¸€ä¸ª**æ–°çš„æäº¤(commit)ä»£æ›¿æ—§çš„**, æ‰€ä»¥å¦‚æœä¹‹å‰ä½ å·²ç»å¾€è¿œç¨‹ä»“åº“ä¸Šæ¨è¿‡ä¸€æ¬¡ä¿®æ­£å‰çš„æäº¤(commit)ï¼Œé‚£ä½ ç°åœ¨å°±å¿…é¡»å¼ºæ¨(force push) (`-f`)ã€‚ æ³¨æ„ &ndash; *æ€»æ˜¯* ç¡®ä¿ä½ æŒ‡æ˜ä¸€ä¸ªåˆ†æ”¯!

```sh
(my-branch)$ git push origin mybranch -f
```

ä¸€èˆ¬æ¥è¯´, **è¦é¿å…å¼ºæ¨**. æœ€å¥½æ˜¯åˆ›å»ºå’Œæ¨(push)ä¸€ä¸ªæ–°çš„æäº¤(commit)ï¼Œè€Œä¸æ˜¯å¼ºæ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤ã€‚åè€…ä¼šä½¿é‚£äº›ä¸è¯¥åˆ†æ”¯æˆ–è¯¥åˆ†æ”¯çš„å­åˆ†æ”¯å·¥ä½œçš„å¼€å‘è€…ï¼Œåœ¨æºå†å²ä¸­äº§ç”Ÿå†²çªã€‚

<a href="undo-git-reset-hard"></a>
### æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹

å¦‚æœä½ æ„å¤–çš„åšäº† `git reset --hard`, ä½ é€šå¸¸èƒ½æ‰¾å›ä½ çš„æäº¤(commit), å› ä¸ºGitå¯¹æ¯ä»¶äº‹éƒ½ä¼šæœ‰æ—¥å¿—ï¼Œä¸”éƒ½ä¼šä¿å­˜å‡ å¤©ã€‚

```sh
(main)$ git reflog
```

ä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªä½ è¿‡å»æäº¤(commit)çš„åˆ—è¡¨, å’Œä¸€ä¸ªé‡ç½®çš„æäº¤ã€‚ é€‰æ‹©ä½ æƒ³è¦å›åˆ°çš„æäº¤(commit)çš„SHAï¼Œå†é‡ç½®ä¸€æ¬¡:

```sh
(main)$ git reset --hard SHA1234
```

è¿™æ ·å°±å®Œæˆäº†ã€‚

## æš‚å­˜(Staging)

<a href="#i-need-to-add-staged-changes-to-the-previous-commit"></a>
### æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit)

```sh
(my-branch*)$ git commit --amend

```

<a name="commit-partial-new-file"></a>
### æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨

ä¸€èˆ¬æ¥è¯´, å¦‚æœä½ æƒ³æš‚å­˜ä¸€ä¸ªæ–‡ä»¶çš„ä¸€éƒ¨åˆ†, ä½ å¯è¿™æ ·åš:

```sh
$ git add --patch filename.x
```

`-p` ç®€å†™ã€‚è¿™ä¼šæ‰“å¼€äº¤äº’æ¨¡å¼ï¼Œ ä½ å°†èƒ½å¤Ÿç”¨ `s` é€‰é¡¹æ¥åˆ†éš”æäº¤(commit)ï¼› ç„¶è€Œ, å¦‚æœè¿™ä¸ªæ–‡ä»¶æ˜¯æ–°çš„, ä¼šæ²¡æœ‰è¿™ä¸ªé€‰æ‹©ï¼Œ æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶æ—¶, è¿™æ ·åš:

```sh
$ git add -N filename.x
```

ç„¶å, ä½ éœ€è¦ç”¨ `e` é€‰é¡¹æ¥æ‰‹åŠ¨é€‰æ‹©éœ€è¦æ·»åŠ çš„è¡Œï¼Œæ‰§è¡Œ `git diff --cached` å°†ä¼šæ˜¾ç¤ºå“ªäº›è¡Œæš‚å­˜äº†å“ªäº›è¡Œåªæ˜¯ä¿å­˜åœ¨æœ¬åœ°äº†ã€‚

<a href="stage-in-two-commits"></a>
### æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–(changes)åŠ åˆ°ä¸¤ä¸ªæäº¤(commit)é‡Œ

`git add` ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶åŠ å…¥åˆ°ä¸€ä¸ªæäº¤. `git add -p` å…è®¸äº¤äº’å¼çš„é€‰æ‹©ä½ æƒ³è¦æäº¤çš„éƒ¨åˆ†.

<a href="unstaging-edits-and-staging-the-unstaged"></a>
### æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥

å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥å°†æ‰€æœ‰çš„å†…å®¹å˜ä¸ºæœªæš‚å­˜ï¼Œç„¶åå†é€‰æ‹©ä½ æƒ³è¦çš„å†…å®¹è¿›è¡Œcommitã€‚
ä½†å‡å®šä½ å°±æ˜¯æƒ³è¦è¿™ä¹ˆåšï¼Œè¿™é‡Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„commitæ¥ä¿å­˜ä½ å·²æš‚å­˜çš„å†…å®¹ï¼Œç„¶åæš‚å­˜ä½ çš„æœªæš‚å­˜çš„å†…å®¹å¹¶è¿›è¡Œstashã€‚ç„¶åresetæœ€åä¸€ä¸ªcommitå°†åŸæœ¬æš‚å­˜çš„å†…å®¹å˜ä¸ºæœªæš‚å­˜ï¼Œæœ€åstash popå›æ¥ã€‚

```sh
$ git commit -m "WIP"
$ git add .
$ git stash
$ git reset HEAD^
$ git stash pop --index 0
```

æ³¨æ„1: è¿™é‡Œä½¿ç”¨`pop`ä»…ä»…æ˜¯å› ä¸ºæƒ³å°½å¯èƒ½ä¿æŒå¹‚ç­‰ã€‚
æ³¨æ„2: å‡å¦‚ä½ ä¸åŠ ä¸Š`--index`ä½ ä¼šæŠŠæš‚å­˜çš„æ–‡ä»¶æ ‡è®°ä¸ºä¸ºå­˜å‚¨.è¿™ä¸ª[é“¾æ¥](https://stackoverflow.com/questions/31595873/git-stash-with-staged-files-does-stash-convert-staged-files-to-unstaged?answertab=active#tab-top) è§£é‡Šå¾—æ¯”è¾ƒæ¸…æ¥šã€‚ï¼ˆä¸è¿‡æ˜¯è‹±æ–‡çš„ï¼Œå…¶å¤§æ„æ˜¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªè¾ƒä¸ºåº•å±‚çš„é—®é¢˜ï¼Œstashæ—¶ä¼šåš2ä¸ªcommitï¼Œå…¶ä¸­ä¸€ä¸ªä¼šè®°å½•indexçŠ¶æ€ï¼Œstagedçš„æ–‡ä»¶ç­‰ä¸œè¥¿ï¼Œå¦ä¸€ä¸ªè®°å½•worktreeå’Œå…¶ä»–çš„ä¸€äº›ä¸œè¥¿ï¼Œå¦‚æœä½ ä¸åœ¨applyæ—¶åŠ indexï¼Œgitä¼šæŠŠä¸¤ä¸ªä¸€èµ·é”€æ¯ï¼Œæ‰€ä»¥stagedé‡Œå°±ç©ºäº†ï¼‰ã€‚

## æœªæš‚å­˜(Unstaged)çš„å†…å®¹

<a href="move-unstaged-edits-to-new-branch"></a>
### æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯

```sh
$ git checkout -b my-branch
```

<a href="move-unstaged-edits-to-old-branch"></a>
### æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯

```sh
$ git stash
$ git checkout my-branch
$ git stash pop
```

<a href="i-want-to-discard-my-local-uncommitted-changes"></a>
### æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–(uncommitted changes)

å¦‚æœä½ åªæ˜¯æƒ³é‡ç½®æº(origin)å’Œä½ æœ¬åœ°(local)ä¹‹é—´çš„ä¸€äº›æäº¤(commit)ï¼Œä½ å¯ä»¥ï¼š

```sh
# one commit
(my-branch)$ git reset --hard HEAD^
# two commits
(my-branch)$ git reset --hard HEAD^^
# four commits
(my-branch)$ git reset --hard HEAD~4
# or
(main)$ git checkout -f
```

é‡ç½®æŸä¸ªç‰¹æ®Šçš„æ–‡ä»¶, ä½ å¯ä»¥ç”¨æ–‡ä»¶ååšä¸ºå‚æ•°:

```sh
$ git reset filename
```

<a href="i-want-to-discard-specific-unstaged-changes"></a>
### æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹

å¦‚æœä½ æƒ³ä¸¢å¼ƒå·¥ä½œæ‹·è´ä¸­çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ã€‚

ç­¾å‡º(checkout)ä¸éœ€è¦çš„å†…å®¹ï¼Œä¿ç•™éœ€è¦çš„ã€‚

```sh
$ git checkout -p
# Answer y to all of the snippets you want to drop
```

å¦å¤–ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ `stash`ï¼Œ Stashæ‰€æœ‰è¦ä¿ç•™ä¸‹çš„å†…å®¹, é‡ç½®å·¥ä½œæ‹·è´, é‡æ–°åº”ç”¨ä¿ç•™çš„éƒ¨åˆ†ã€‚

```sh
$ git stash -p
# Select all of the snippets you want to save
$ git reset --hard
$ git stash pop
```

æˆ–è€…, stash ä½ ä¸éœ€è¦çš„éƒ¨åˆ†, ç„¶åstash dropã€‚

```sh
$ git stash -p
# Select all of the snippets you don't want to save
$ git stash drop
```

## åˆ†æ”¯(Branches)

<a name="pull-wrong-branch"></a>
### æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯

è¿™æ˜¯å¦å¤–ä¸€ç§ä½¿ç”¨ `git reflog` æƒ…å†µï¼Œæ‰¾åˆ°åœ¨è¿™æ¬¡é”™è¯¯æ‹‰(pull) ä¹‹å‰HEADçš„æŒ‡å‘ã€‚

```sh
(main)$ git reflog
ab7555f HEAD@{0}: pull origin wrong-branch: Fast-forward
c5bc55a HEAD@{1}: checkout: checkout message goes here
```

é‡ç½®åˆ†æ”¯åˆ°ä½ æ‰€éœ€çš„æäº¤(desired commit):

```sh
$ git reset --hard c5bc55a
```

å®Œæˆã€‚

<a href="discard-local-commits"></a>
### æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´

å…ˆç¡®è®¤ä½ æ²¡æœ‰æ¨(push)ä½ çš„å†…å®¹åˆ°è¿œç¨‹ã€‚

`git status` ä¼šæ˜¾ç¤ºä½ é¢†å…ˆ(ahead)æº(origin)å¤šå°‘ä¸ªæäº¤:

```sh
(my-branch)$ git status
# On branch my-branch
# Your branch is ahead of 'origin/my-branch' by 2 commits.
#   (use "git push" to publish your local commits)
#
```

ä¸€ç§æ–¹æ³•æ˜¯:

```sh
(main)$ git reset --hard origin/my-branch
```

<a name="commit-wrong-branch"></a>
### æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†main

åœ¨mainä¸‹åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä¸åˆ‡æ¢åˆ°æ–°åˆ†æ”¯,ä»åœ¨mainä¸‹:

```sh
(main)$ git branch my-branch
```

æŠŠmainåˆ†æ”¯é‡ç½®åˆ°å‰ä¸€ä¸ªæäº¤:

```sh
(main)$ git reset --hard HEAD^
```

`HEAD^` æ˜¯ `HEAD^1` çš„ç®€å†™ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šè¦è®¾ç½®çš„`HEAD`æ¥è¿›ä¸€æ­¥é‡ç½®ã€‚

æˆ–è€…, å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ `HEAD^`, æ‰¾åˆ°ä½ æƒ³é‡ç½®åˆ°çš„æäº¤(commit)çš„hash(`git log` èƒ½å¤Ÿå®Œæˆ)ï¼Œ ç„¶åé‡ç½®åˆ°è¿™ä¸ªhashã€‚ ä½¿ç”¨`git push` åŒæ­¥å†…å®¹åˆ°è¿œç¨‹ã€‚

ä¾‹å¦‚, mainåˆ†æ”¯æƒ³é‡ç½®åˆ°çš„æäº¤çš„hashä¸º`a13b85e`:

```sh
(main)$ git reset --hard a13b85e
HEAD is now at a13b85e
```

ç­¾å‡º(checkout)åˆšæ‰æ–°å»ºçš„åˆ†æ”¯ç»§ç»­å·¥ä½œ:

```sh
(main)$ git checkout my-branch
```

<a name="keep-whole-file"></a>
### æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶

å‡è®¾ä½ æ­£åœ¨åšä¸€ä¸ªåŸå‹æ–¹æ¡ˆ(åŸæ–‡ä¸ºworking spike (see note)), æœ‰æˆç™¾çš„å†…å®¹ï¼Œæ¯ä¸ªéƒ½å·¥ä½œå¾—å¾ˆå¥½ã€‚ç°åœ¨, ä½ æäº¤åˆ°äº†ä¸€ä¸ªåˆ†æ”¯ï¼Œä¿å­˜å·¥ä½œå†…å®¹:

```sh
(solution)$ git add -A && git commit -m "Adding all changes from this spike into one big commit."
```

å½“ä½ æƒ³è¦æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªåˆ†æ”¯é‡Œ (å¯èƒ½æ˜¯`feature`, æˆ–è€… `develop`), ä½ å…³å¿ƒæ˜¯ä¿æŒæ•´ä¸ªæ–‡ä»¶çš„å®Œæ•´ï¼Œä½ æƒ³è¦ä¸€ä¸ªå¤§çš„æäº¤åˆ†éš”æˆæ¯”è¾ƒå°ã€‚

å‡è®¾ä½ æœ‰:

  * åˆ†æ”¯ `solution`, æ‹¥æœ‰åŸå‹æ–¹æ¡ˆï¼Œ é¢†å…ˆ `develop` åˆ†æ”¯ã€‚
  * åˆ†æ”¯ `develop`, åœ¨è¿™é‡Œä½ åº”ç”¨åŸå‹æ–¹æ¡ˆçš„ä¸€äº›å†…å®¹ã€‚

æˆ‘å»å¯ä»¥é€šè¿‡æŠŠå†…å®¹æ‹¿åˆ°ä½ çš„åˆ†æ”¯é‡Œï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜:

```sh
(develop)$ git checkout solution -- file1.txt
```

è¿™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å†…å®¹ä»åˆ†æ”¯ `solution` æ‹¿åˆ°åˆ†æ”¯ `develop` é‡Œæ¥:

```sh
# On branch develop
# Your branch is up-to-date with 'origin/develop'.
# Changes to be committed:
#  (use "git reset HEAD <file>..." to unstage)
#
#        modified:   file1.txt
```

ç„¶å, æ­£å¸¸æäº¤ã€‚

Note: Spike solutions are made to analyze or solve the problem. These solutions are used for estimation and discarded once everyone gets clear visualization of the problem. ~ [Wikipedia](https://en.wikipedia.org/wiki/Extreme_programming_practices).

<a name="cherry-pick"></a>
### æˆ‘æŠŠå‡ ä¸ªæäº¤(commit)æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ

å‡è®¾ä½ æœ‰ä¸€ä¸ª`main`åˆ†æ”¯ï¼Œ æ‰§è¡Œ`git log`, ä½ çœ‹åˆ°ä½ åšè¿‡ä¸¤æ¬¡æäº¤:

```sh
(main)$ git log

commit e3851e817c451cc36f2e6f3049db528415e3c114
Author: Alex Lee <alexlee@example.com>
Date:   Tue Jul 22 15:39:27 2014 -0400

    Bug #21 - Added CSRF protection

commit 5ea51731d150f7ddc4a365437931cd8be3bf3131
Author: Alex Lee <alexlee@example.com>
Date:   Tue Jul 22 15:39:12 2014 -0400

    Bug #14 - Fixed spacing on title

commit a13b85e984171c6e2a1729bb061994525f626d14
Author: Aki Rose <akirose@example.com>
Date:   Tue Jul 21 01:12:48 2014 -0400

    First commit
```

è®©æˆ‘ä»¬ç”¨æäº¤hash(commit hash)æ ‡è®°bug (`e3851e8` for #21, `5ea5173` for #14).

é¦–å…ˆ, æˆ‘ä»¬æŠŠ`main`åˆ†æ”¯é‡ç½®åˆ°æ­£ç¡®çš„æäº¤(`a13b85e`):

```sh
(main)$ git reset --hard a13b85e
HEAD is now at a13b85e
```

ç°åœ¨, æˆ‘ä»¬å¯¹ bug #21 åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯:

```sh
(main)$ git checkout -b 21
(21)$
```

æ¥ç€, æˆ‘ä»¬ç”¨ *cherry-pick* æŠŠå¯¹bug #21çš„æäº¤æ”¾å…¥å½“å‰åˆ†æ”¯ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å°†åº”ç”¨(apply)è¿™ä¸ªæäº¤(commit)ï¼Œä»…ä»…è¿™ä¸€ä¸ªæäº¤(commit)ï¼Œç›´æ¥åœ¨HEADä¸Šé¢ã€‚

```sh
(21)$ git cherry-pick e3851e8
```

è¿™æ—¶å€™, è¿™é‡Œå¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œ å‚è§[äº¤äº’å¼ rebasing ç« ](#interactive-rebase) [**å†²çªèŠ‚**](#merge-conflict) è§£å†³å†²çª.

å†è€…ï¼Œ æˆ‘ä»¬ä¸ºbug #14 åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯, ä¹ŸåŸºäº`main`åˆ†æ”¯

```sh
(21)$ git checkout main
(main)$ git checkout -b 14
(14)$
```

æœ€å, ä¸º bug #14 æ‰§è¡Œ `cherry-pick`:

```sh
(14)$ git cherry-pick 5ea5173
```

<a name="delete-stale-local-branches"></a>
### æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸(upstream)åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯
ä¸€æ—¦ä½ åœ¨github ä¸Šé¢åˆå¹¶(merge)äº†ä¸€ä¸ªpull request, ä½ å°±å¯ä»¥åˆ é™¤ä½ forké‡Œè¢«åˆå¹¶çš„åˆ†æ”¯ã€‚ å¦‚æœä½ ä¸å‡†å¤‡ç»§ç»­åœ¨è¿™ä¸ªåˆ†æ”¯é‡Œå·¥ä½œ, åˆ é™¤è¿™ä¸ªåˆ†æ”¯çš„æœ¬åœ°æ‹·è´ä¼šæ›´å¹²å‡€ï¼Œä½¿ä½ ä¸ä¼šé™·å…¥å·¥ä½œåˆ†æ”¯å’Œä¸€å †é™ˆæ—§åˆ†æ”¯çš„æ··ä¹±ä¹‹ä¸­ã€‚

```sh
$ git fetch -p
```

<a name='restore-a-deleted-branch'></a>
### æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯

å¦‚æœä½ å®šæœŸæ¨é€åˆ°è¿œç¨‹, å¤šæ•°æƒ…å†µä¸‹åº”è¯¥æ˜¯å®‰å…¨çš„ï¼Œä½†æœ‰äº›æ—¶å€™è¿˜æ˜¯å¯èƒ½åˆ é™¤äº†è¿˜æ²¡æœ‰æ¨åˆ°è¿œç¨‹çš„åˆ†æ”¯ã€‚ è®©æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å’Œä¸€ä¸ªæ–°çš„æ–‡ä»¶:

```sh
(main)$ git checkout -b my-branch
(my-branch)$ git branch
(my-branch)$ touch foo.txt
(my-branch)$ ls
README.md foo.txt
```

æ·»åŠ æ–‡ä»¶å¹¶åšä¸€æ¬¡æäº¤

```sh
(my-branch)$ git add .
(my-branch)$ git commit -m 'foo.txt added'
(my-branch)$ foo.txt added
 1 files changed, 1 insertions(+)
 create mode 100644 foo.txt
(my-branch)$ git log

commit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012
Author: siemiatj <siemiatj@example.com>
Date:   Wed Jul 30 00:34:10 2014 +0200

    foo.txt added

commit 69204cdf0acbab201619d95ad8295928e7f411d5
Author: Kate Hudson <katehudson@example.com>
Date:   Tue Jul 29 13:14:46 2014 -0400

    Fixes #6: Force pushing after amending commits
```

ç°åœ¨æˆ‘ä»¬åˆ‡å›åˆ°ä¸»(main)åˆ†æ”¯ï¼Œâ€˜ä¸å°å¿ƒçš„â€™åˆ é™¤`my-branch`åˆ†æ”¯

```sh
(my-branch)$ git checkout main
Switched to branch 'main'
Your branch is up-to-date with 'origin/main'.
(main)$ git branch -D my-branch
Deleted branch my-branch (was 4e3cd85).
(main)$ echo oh noes, deleted my branch!
oh noes, deleted my branch!
```

åœ¨è¿™æ—¶å€™ä½ åº”è¯¥æƒ³èµ·äº†`reflog`, ä¸€ä¸ªå‡çº§ç‰ˆçš„æ—¥å¿—ï¼Œå®ƒå­˜å‚¨äº†ä»“åº“(repo)é‡Œé¢æ‰€æœ‰åŠ¨ä½œçš„å†å²ã€‚

```
(main)$ git reflog
69204cd HEAD@{0}: checkout: moving from my-branch to main
4e3cd85 HEAD@{1}: commit: foo.txt added
69204cd HEAD@{2}: checkout: moving from main to my-branch
```

æ­£å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥è‡ªåˆ é™¤åˆ†æ”¯çš„æäº¤hash(commit hash)ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ˜¯å¦èƒ½æ¢å¤åˆ é™¤äº†çš„åˆ†æ”¯ã€‚

```sh
(main)$ git checkout -b my-branch-help
Switched to a new branch 'my-branch-help'
(my-branch-help)$ git reset --hard 4e3cd85
HEAD is now at 4e3cd85 foo.txt added
(my-branch-help)$ ls
README.md foo.txt
```

çœ‹! æˆ‘ä»¬æŠŠåˆ é™¤çš„æ–‡ä»¶æ‰¾å›æ¥äº†ã€‚ Gitçš„ `reflog` åœ¨rebasingå‡ºé”™çš„æ—¶å€™ä¹Ÿæ˜¯åŒæ ·æœ‰ç”¨çš„ã€‚

<a name="i-want-to-delete-a-branch"></a>
### æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯

åˆ é™¤ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯:

```sh
(main)$ git push origin --delete my-branch
```

ä½ ä¹Ÿå¯ä»¥:

```sh
(main)$ git push origin :my-branch
```

åˆ é™¤ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯:

```sh
(main)$ git branch -D my-branch
```

<a name="i-want-to-checkout-to-a-remote-branch-that-someone-else-is-working-on"></a>
### æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º(checkout)ä¸€ä¸ªåˆ†æ”¯

é¦–å…ˆ, ä»è¿œç¨‹æ‹‰å–(fetch) æ‰€æœ‰åˆ†æ”¯:

```sh
(main)$ git fetch --all
```

å‡è®¾ä½ æƒ³è¦ä»è¿œç¨‹çš„`daves`åˆ†æ”¯ç­¾å‡ºåˆ°æœ¬åœ°çš„`daves`

```sh
(main)$ git checkout --track origin/daves
Branch daves set up to track remote branch daves from origin.
Switched to a new branch 'daves'
```

(`--track` æ˜¯ `git checkout -b [branch] [remotename]/[branch]` çš„ç®€å†™)

è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ª`daves`åˆ†æ”¯çš„æœ¬åœ°æ‹·è´, ä»»ä½•æ¨è¿‡(pushed)çš„æ›´æ–°ï¼Œè¿œç¨‹éƒ½èƒ½çœ‹åˆ°.

## Rebasing å’Œåˆå¹¶(Merging)

<a name="undo-rebase"></a>
### æˆ‘æƒ³æ’¤é”€rebase/merge

ä½ å¯ä»¥åˆå¹¶(merge)æˆ–rebaseäº†ä¸€ä¸ªé”™è¯¯çš„åˆ†æ”¯, æˆ–è€…å®Œæˆä¸äº†ä¸€ä¸ªè¿›è¡Œä¸­çš„rebase/mergeã€‚ Git åœ¨è¿›è¡Œå±é™©æ“ä½œçš„æ—¶å€™ä¼šæŠŠåŸå§‹çš„HEADä¿å­˜åœ¨ä¸€ä¸ªå«ORIG_HEADçš„å˜é‡é‡Œ, æ‰€ä»¥è¦æŠŠåˆ†æ”¯æ¢å¤åˆ°rebase/mergeå‰çš„çŠ¶æ€æ˜¯å¾ˆå®¹æ˜“çš„ã€‚

```sh
(my-branch)$ git reset --hard ORIG_HEAD
```

<a name="force-push-rebase"></a>
### æˆ‘å·²ç»rebaseè¿‡, ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨(force push)

ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœä½ æƒ³æŠŠè¿™äº›å˜åŒ–(changes)ååº”åˆ°è¿œç¨‹åˆ†æ”¯ä¸Šï¼Œä½ å°±å¿…é¡»å¾—å¼ºæ¨(force push)ã€‚ æ˜¯å› ä½ å¿«è¿›(Fast forward)äº†æäº¤ï¼Œæ”¹å˜äº†Gitå†å², è¿œç¨‹åˆ†æ”¯ä¸ä¼šæ¥å—å˜åŒ–(changes)ï¼Œé™¤éå¼ºæ¨(force push)ã€‚è¿™å°±æ˜¯è®¸å¤šäººä½¿ç”¨ merge å·¥ä½œæµ, è€Œä¸æ˜¯ rebasing å·¥ä½œæµçš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œ å¼€å‘è€…çš„å¼ºæ¨(force push)ä¼šä½¿å¤§çš„å›¢é˜Ÿé™·å…¥éº»çƒ¦ã€‚ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼Œä¸€ç§å®‰å…¨ä½¿ç”¨ rebase çš„æ–¹æ³•æ˜¯ï¼Œä¸è¦æŠŠä½ çš„å˜åŒ–(changes)åæ˜ åˆ°è¿œç¨‹åˆ†æ”¯ä¸Š, è€Œæ˜¯æŒ‰ä¸‹é¢çš„åš:

```sh
(main)$ git checkout my-branch
(my-branch)$ git rebase -i main
(my-branch)$ git checkout main
(main)$ git merge --ff-only my-branch
```

æ›´å¤š, å‚è§ [this SO thread](http://stackoverflow.com/questions/11058312/how-can-i-use-git-rebase-without-requiring-a-forced-push).

<a name="interactive-rebase"></a>
### æˆ‘éœ€è¦ç»„åˆ(combine)å‡ ä¸ªæäº¤(commit)

å‡è®¾ä½ çš„å·¥ä½œåˆ†æ”¯å°†ä¼šåšå¯¹äº `main` çš„pull-requestã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¸å…³å¿ƒæäº¤(commit)çš„æ—¶é—´æˆ³ï¼Œåªæƒ³ç»„åˆ *æ‰€æœ‰* æäº¤(commit) åˆ°ä¸€ä¸ªå•ç‹¬çš„é‡Œé¢, ç„¶åé‡ç½®(reset)é‡æäº¤(recommit)ã€‚ ç¡®ä¿ä¸»(main)åˆ†æ”¯æ˜¯æœ€æ–°çš„å’Œä½ çš„å˜åŒ–éƒ½å·²ç»æäº¤äº†, ç„¶å:

```sh
(my-branch)$ git reset --soft main
(my-branch)$ git commit -am "New awesome feature"
```

å¦‚æœä½ æƒ³è¦æ›´å¤šçš„æ§åˆ¶, æƒ³è¦ä¿ç•™æ—¶é—´æˆ³, ä½ éœ€è¦åšäº¤äº’å¼rebase (interactive rebase):

```sh
(my-branch)$ git rebase -i main
```

å¦‚æœæ²¡æœ‰ç›¸å¯¹çš„å…¶å®ƒåˆ†æ”¯ï¼Œ ä½ å°†ä¸å¾—ä¸ç›¸å¯¹è‡ªå·±çš„`HEAD` è¿›è¡Œ rebaseã€‚ ä¾‹å¦‚ï¼šä½ æƒ³ç»„åˆæœ€è¿‘çš„ä¸¤æ¬¡æäº¤(commit), ä½ å°†ç›¸å¯¹äº`HEAD~2` è¿›è¡Œrebaseï¼Œ ç»„åˆæœ€è¿‘3æ¬¡æäº¤(commit), ç›¸å¯¹äº`HEAD~3`, ç­‰ç­‰ã€‚

```sh
(main)$ git rebase -i HEAD~2
```

åœ¨ä½ æ‰§è¡Œäº†äº¤äº’å¼ rebaseçš„å‘½ä»¤(interactive rebase command)å, ä½ å°†åœ¨ä½ çš„ç¼–è¾‘å™¨é‡Œçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
pick b729ad5 fixup
pick e3851e8 another fix

# Rebase 8074d12..b729ad5 onto 8074d12
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out
```

æ‰€æœ‰ä»¥ `#` å¼€å¤´çš„è¡Œéƒ½æ˜¯æ³¨é‡Š, ä¸ä¼šå½±å“ rebase.

ç„¶åï¼Œä½ å¯ä»¥ç”¨ä»»ä½•ä¸Šé¢å‘½ä»¤åˆ—è¡¨çš„å‘½ä»¤æ›¿æ¢ `pick`, ä½ ä¹Ÿå¯ä»¥é€šè¿‡åˆ é™¤å¯¹åº”çš„è¡Œæ¥åˆ é™¤ä¸€ä¸ªæäº¤(commit)ã€‚

ä¾‹å¦‚, å¦‚æœä½ æƒ³ **å•ç‹¬ä¿ç•™æœ€æ—§(first)çš„æäº¤(commit),ç»„åˆæ‰€æœ‰å‰©ä¸‹çš„åˆ°ç¬¬äºŒä¸ªé‡Œé¢**, ä½ å°±åº”è¯¥ç¼–è¾‘ç¬¬äºŒä¸ªæäº¤(commit)åé¢çš„æ¯ä¸ªæäº¤(commit) å‰çš„å•è¯ä¸º `f`:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
f b729ad5 fixup
f e3851e8 another fix
```

å¦‚æœä½ æƒ³ç»„åˆè¿™äº›æäº¤(commit) **å¹¶é‡å‘½åè¿™ä¸ªæäº¤(commit)**, ä½ åº”è¯¥åœ¨ç¬¬äºŒä¸ªæäº¤(commit)æ—è¾¹æ·»åŠ ä¸€ä¸ª`r`ï¼Œæˆ–è€…æ›´ç®€å•çš„ç”¨`s` æ›¿ä»£ `f`:

```vim
pick a9c8a1d Some refactoring
pick 01b2fd8 New awesome feature
s b729ad5 fixup
s e3851e8 another fix
```

ä½ å¯ä»¥åœ¨æ¥ä¸‹æ¥å¼¹å‡ºçš„æ–‡æœ¬æç¤ºæ¡†é‡Œé‡å‘½åæäº¤(commit)ã€‚

```vim
Newer, awesomer features

# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# rebase in progress; onto 8074d12
# You are currently editing a commit while rebasing branch 'main' on '8074d12'.
#
# Changes to be committed:
#	modified:   README.md
#

```

å¦‚æœæˆåŠŸäº†, ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:

```sh
(main)$ Successfully rebased and updated refs/heads/main.
```

#### å®‰å…¨åˆå¹¶(merging)ç­–ç•¥
`--no-commit` æ‰§è¡Œåˆå¹¶(merge)ä½†ä¸è‡ªåŠ¨æäº¤, ç»™ç”¨æˆ·åœ¨åšæäº¤å‰æ£€æŸ¥å’Œä¿®æ”¹çš„æœºä¼šã€‚ `no-ff` ä¼šä¸ºç‰¹æ€§åˆ†æ”¯(feature branch)çš„å­˜åœ¨è¿‡ç•™ä¸‹è¯æ®, ä¿æŒé¡¹ç›®å†å²ä¸€è‡´ã€‚

```sh
(main)$ git merge --no-ff --no-commit my-branch
```

#### æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤(commit)

```sh
(main)$ git merge --squash my-branch
```

<a name="rebase-unpushed-commits"></a>
#### æˆ‘åªæƒ³ç»„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit)

æœ‰æ—¶å€™ï¼Œåœ¨å°†æ•°æ®æ¨å‘ä¸Šæ¸¸ä¹‹å‰ï¼Œä½ æœ‰å‡ ä¸ªæ­£åœ¨è¿›è¡Œçš„å·¥ä½œæäº¤(commit)ã€‚è¿™æ—¶å€™ä¸å¸Œæœ›æŠŠå·²ç»æ¨(push)è¿‡çš„ç»„åˆè¿›æ¥ï¼Œå› ä¸ºå…¶ä»–äººå¯èƒ½å·²ç»æœ‰æäº¤(commit)å¼•ç”¨å®ƒä»¬äº†ã€‚

```sh
(main)$ git rebase -i @{u}
```

è¿™ä¼šäº§ç”Ÿä¸€æ¬¡äº¤äº’å¼çš„rebase(interactive rebase), åªä¼šåˆ—å‡ºæ²¡æœ‰æ¨(push)çš„æäº¤(commit)ï¼Œ åœ¨è¿™ä¸ªåˆ—è¡¨æ—¶è¿›è¡Œreorder/fix/squash éƒ½æ˜¯å®‰å…¨çš„ã€‚

<a name="check-if-all-commits-on-a-branch-are-merged"></a>
### æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆå¹¶(merge)è¿‡äº†

æ£€æŸ¥ä¸€ä¸ªåˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)æ˜¯å¦éƒ½å·²ç»åˆå¹¶(merge)åˆ°äº†å…¶å®ƒåˆ†æ”¯, ä½ åº”è¯¥åœ¨è¿™äº›åˆ†æ”¯çš„head(æˆ–ä»»ä½• commits)ä¹‹é—´åšä¸€æ¬¡diff:

```sh
(main)$ git log --graph --left-right --cherry-pick --oneline HEAD...feature/120-on-scroll
```

è¿™ä¼šå‘Šè¯‰ä½ åœ¨ä¸€ä¸ªåˆ†æ”¯é‡Œæœ‰è€Œå¦ä¸€ä¸ªåˆ†æ”¯æ²¡æœ‰çš„æ‰€æœ‰æäº¤(commit), å’Œåˆ†æ”¯ä¹‹é—´ä¸å…±äº«çš„æäº¤(commit)çš„åˆ—è¡¨ã€‚ å¦ä¸€ä¸ªåšæ³•å¯ä»¥æ˜¯:

```sh
(main)$ git log main ^feature/120-on-scroll --no-merges
```

### äº¤äº’å¼rebase(interactive rebase)å¯èƒ½å‡ºç°çš„é—®é¢˜

<a name="noop"></a>
#### è¿™ä¸ªrebase ç¼–è¾‘å±å¹•å‡ºç°'noop'

å¦‚æœä½ çœ‹åˆ°çš„æ˜¯è¿™æ ·:
```
noop
```

è¿™æ„å‘³ç€ä½ rebaseçš„åˆ†æ”¯å’Œå½“å‰åˆ†æ”¯åœ¨åŒä¸€ä¸ªæäº¤(commit)ä¸Š, æˆ–è€… *é¢†å…ˆ(ahead)* å½“å‰åˆ†æ”¯ã€‚ ä½ å¯ä»¥å°è¯•:

* æ£€æŸ¥ç¡®ä¿ä¸»(main)åˆ†æ”¯æ²¡æœ‰é—®é¢˜
* rebase  `HEAD~2` æˆ–è€…æ›´æ—©

<a name="merge-conflict"></a>
#### æœ‰å†²çªçš„æƒ…å†µ

å¦‚æœä½ ä¸èƒ½æˆåŠŸçš„å®Œæˆrebase, ä½ å¯èƒ½å¿…é¡»è¦è§£å†³å†²çªã€‚

é¦–å…ˆæ‰§è¡Œ `git status` æ‰¾å‡ºå“ªäº›æ–‡ä»¶æœ‰å†²çª:

```sh
(my-branch)$ git status
On branch my-branch
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   README.md
```

åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢, `README.md` æœ‰å†²çªã€‚ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:

```vim
   <<<<<<< HEAD
   some code
   =========
   some code
   >>>>>>> new-commit
```

ä½ éœ€è¦è§£å†³æ–°æäº¤çš„ä»£ç (ç¤ºä¾‹é‡Œ, ä»ä¸­é—´`==`çº¿åˆ°`new-commit`çš„åœ°æ–¹)ä¸`HEAD` ä¹‹é—´ä¸ä¸€æ ·çš„åœ°æ–¹.

æœ‰æ—¶å€™è¿™äº›åˆå¹¶éå¸¸å¤æ‚ï¼Œä½ åº”è¯¥ä½¿ç”¨å¯è§†åŒ–çš„å·®å¼‚ç¼–è¾‘å™¨(visual diff editor):

```sh
(main*)$ git mergetool -t opendiff
```

åœ¨ä½ è§£å†³å®Œæ‰€æœ‰å†²çªå’Œæµ‹è¯•è¿‡å, `git add` å˜åŒ–äº†çš„(changed)æ–‡ä»¶, ç„¶åç”¨`git rebase --continue` ç»§ç»­rebaseã€‚

```sh
(my-branch)$ git add README.md
(my-branch)$ git rebase --continue
```

å¦‚æœåœ¨è§£å†³å®Œæ‰€æœ‰çš„å†²çªè¿‡åï¼Œå¾—åˆ°äº†ä¸æäº¤å‰ä¸€æ ·çš„ç»“æœ, å¯ä»¥æ‰§è¡Œ`git rebase --skip`ã€‚

ä»»ä½•æ—¶å€™ä½ æƒ³ç»“æŸæ•´ä¸ªrebase è¿‡ç¨‹ï¼Œå›æ¥rebaseå‰çš„åˆ†æ”¯çŠ¶æ€, ä½ å¯ä»¥åš:

```sh
(my-branch)$ git rebase --abort
```

<a name="stashing"></a>
## Stash

### æš‚å­˜æ‰€æœ‰æ”¹åŠ¨

æš‚å­˜ä½ å·¥ä½œç›®å½•ä¸‹çš„æ‰€æœ‰æ”¹åŠ¨

```sh
$ git stash
```

ä½ å¯ä»¥ä½¿ç”¨`-u`æ¥æ’é™¤ä¸€äº›æ–‡ä»¶

```sh
$ git stash -u
```

### æš‚å­˜æŒ‡å®šæ–‡ä»¶

å‡è®¾ä½ åªæƒ³æš‚å­˜æŸä¸€ä¸ªæ–‡ä»¶

```sh
$ git stash push working-directory-path/filename.ext
```

å‡è®¾ä½ æƒ³æš‚å­˜å¤šä¸ªæ–‡ä»¶

```sh
$ git stash push working-directory-path/filename1.ext working-directory-path/filename2.ext
```

<a name="stash-msg"></a>
### æš‚å­˜æ—¶è®°å½•æ¶ˆæ¯

è¿™æ ·ä½ å¯ä»¥åœ¨`list`æ—¶çœ‹åˆ°å®ƒ

```sh
$ git stash save <message>
```
æˆ–
```sh
$ git stash push -m <message>
```
<a name="stash-apply-specific"></a>
### ä½¿ç”¨æŸä¸ªæŒ‡å®šæš‚å­˜

é¦–å…ˆä½ å¯ä»¥æŸ¥çœ‹ä½ çš„`stash`è®°å½•

```sh
$ git stash list
```

ç„¶åä½ å¯ä»¥`apply`æŸä¸ª`stash`

```sh
$ git stash apply "stash@{n}"
```

æ­¤å¤„ï¼Œ 'n'æ˜¯`stash`åœ¨æ ˆä¸­çš„ä½ç½®ï¼Œæœ€ä¸Šå±‚çš„`stash`ä¼šæ˜¯0

é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ—¶é—´æ ‡è®°(å‡å¦‚ä½ èƒ½è®°å¾—çš„è¯)ã€‚

```sh
$ git stash apply "stash@{2.hours.ago}"
```

<a href="stage-and-keep-unstaged"></a>
### æš‚å­˜æ—¶ä¿ç•™æœªæš‚å­˜çš„å†…å®¹

ä½ éœ€è¦æ‰‹åŠ¨createä¸€ä¸ª`stash commit`ï¼Œ ç„¶åä½¿ç”¨`git stash store`ã€‚

```sh
$ git stash create
$ git stash store -m "commit-message" CREATED_SHA1
```

<a name="miscellaneous-objects"></a>
## æ‚é¡¹(Miscellaneous Objects)

<a name="clone-submodules"></a>
### å…‹éš†æ‰€æœ‰å­æ¨¡å—

```sh
$ git clone --recursive git://github.com/foo/bar.git
```

å¦‚æœå·²ç»å…‹éš†äº†:

```sh
$ git submodule update --init --recursive
```

<a name="delete-tag"></a>
### åˆ é™¤æ ‡ç­¾(tag)

```sh
$ git tag -d <tag_name>
$ git push <remote> :refs/tags/<tag_name>
```

<a name="recover-tag"></a>
### æ¢å¤å·²åˆ é™¤æ ‡ç­¾(tag)

å¦‚æœä½ æƒ³æ¢å¤ä¸€ä¸ªå·²åˆ é™¤æ ‡ç­¾(tag), å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤: é¦–å…ˆ, éœ€è¦æ‰¾åˆ°æ— æ³•è®¿é—®çš„æ ‡ç­¾(unreachable tag):

```sh
$ git fsck --unreachable | grep tag
```

è®°ä¸‹è¿™ä¸ªæ ‡ç­¾(tag)çš„hashï¼Œç„¶åç”¨Gitçš„ [update-ref](http://git-scm.com/docs/git-update-ref):

```sh
$ git update-ref refs/tags/<tag_name> <hash>
```

è¿™æ—¶ä½ çš„æ ‡ç­¾(tag)åº”è¯¥å·²ç»æ¢å¤äº†ã€‚

<a name="deleted-patch"></a>
### å·²åˆ é™¤è¡¥ä¸(patch)

å¦‚æœæŸäººåœ¨ GitHub ä¸Šç»™ä½ å‘äº†ä¸€ä¸ªpull request, ä½†æ˜¯ç„¶åä»–åˆ é™¤äº†ä»–è‡ªå·±çš„åŸå§‹ fork, ä½ å°†æ²¡æ³•å…‹éš†ä»–ä»¬çš„æäº¤(commit)æˆ–ä½¿ç”¨ `git am`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹, æœ€å¥½æ‰‹åŠ¨çš„æŸ¥çœ‹ä»–ä»¬çš„æäº¤(commit)ï¼Œå¹¶æŠŠå®ƒä»¬æ‹·è´åˆ°ä¸€ä¸ªæœ¬åœ°æ–°åˆ†æ”¯ï¼Œç„¶ååšæäº¤ã€‚

åšå®Œæäº¤å, å†ä¿®æ”¹ä½œè€…ï¼Œå‚è§[å˜æ›´ä½œè€…](#commit-wrong-author)ã€‚ ç„¶å, åº”ç”¨å˜åŒ–, å†å‘èµ·ä¸€ä¸ªæ–°çš„pull requestã€‚

## è·Ÿè¸ªæ–‡ä»¶(Tracking Files)

<a href="i-want-to-change-a-file-names-capitalization-without-changing-the-contents-of-the-file"></a>
### æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹

```sh
(main)$ git mv --force myfile MyFile
```

<a href="remove-from-git"></a>
### æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶

```sh
(main)$ git rm --cached log.txt
```

## é…ç½®(Configuration)

<a name="adding-command-aliases"></a>
### æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å(alias)

åœ¨ OS X å’Œ Linux ä¸‹, ä½ çš„ Gitçš„é…ç½®æ–‡ä»¶å‚¨å­˜åœ¨ ```~/.gitconfig```ã€‚æˆ‘åœ¨```[alias]``` éƒ¨åˆ†æ·»åŠ äº†ä¸€äº›å¿«æ·åˆ«å(å’Œä¸€äº›æˆ‘å®¹æ˜“æ‹¼å†™é”™è¯¯çš„)ï¼Œå¦‚ä¸‹:

```vim
[alias]
    a = add
    amend = commit --amend
    c = commit
    ca = commit --amend
    ci = commit -a
    co = checkout
    d = diff
    dc = diff --changed
    ds = diff --staged
    f = fetch
    loll = log --graph --decorate --pretty=oneline --abbrev-commit
    m = merge
    one = log --pretty=oneline
    outstanding = rebase -i @{u}
    s = status
    unpushed = log @{u}
    wc = whatchanged
    wip = rebase -i @{u}
    zap = fetch -p
```

<a name="credential-helper"></a>
### æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“(repository)çš„ç”¨æˆ·åå’Œå¯†ç 

ä½ å¯èƒ½æœ‰ä¸€ä¸ªä»“åº“éœ€è¦æˆæƒï¼Œè¿™æ—¶ä½ å¯ä»¥ç¼“å­˜ç”¨æˆ·åå’Œå¯†ç ï¼Œè€Œä¸ç”¨æ¯æ¬¡æ¨/æ‹‰(push/pull)çš„æ—¶å€™éƒ½è¾“å…¥ï¼ŒCredential helperèƒ½å¸®ä½ ã€‚

```sh
$ git config --global credential.helper cache
# Set git to use the credential memory cache
```

```sh
$ git config --global credential.helper 'cache --timeout=3600'
# Set the cache to timeout after 1 hour (setting is in seconds)
```

<a href="#ive-no-idea-what-i-did-wrong"></a>
## æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ

ä½ æŠŠäº‹æƒ…æç ¸äº†ï¼šä½  `é‡ç½®(reset)` äº†ä¸€äº›ä¸œè¥¿, æˆ–è€…ä½ åˆå¹¶äº†é”™è¯¯çš„åˆ†æ”¯, äº¦æˆ–ä½ å¼ºæ¨äº†åæ‰¾ä¸åˆ°ä½ è‡ªå·±çš„æäº¤(commit)äº†ã€‚æœ‰äº›æ—¶å€™, ä½ ä¸€ç›´éƒ½åšå¾—å¾ˆå¥½, ä½†ä½ æƒ³å›åˆ°ä»¥å‰çš„æŸä¸ªçŠ¶æ€ã€‚

è¿™å°±æ˜¯ `git reflog` çš„ç›®çš„ï¼Œ `reflog` è®°å½•å¯¹åˆ†æ”¯é¡¶ç«¯(the tip of a branch)çš„ä»»ä½•æ”¹å˜, å³ä½¿é‚£ä¸ªé¡¶ç«¯æ²¡æœ‰è¢«ä»»ä½•åˆ†æ”¯æˆ–æ ‡ç­¾å¼•ç”¨ã€‚åŸºæœ¬ä¸Š, æ¯æ¬¡HEADçš„æ”¹å˜, ä¸€æ¡æ–°çš„è®°å½•å°±ä¼šå¢åŠ åˆ°`reflog`ã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™åªå¯¹æœ¬åœ°åˆ†æ”¯èµ·ä½œç”¨ï¼Œä¸”å®ƒåªè·Ÿè¸ªåŠ¨ä½œ (ä¾‹å¦‚ï¼Œä¸ä¼šè·Ÿè¸ªä¸€ä¸ªæ²¡æœ‰è¢«è®°å½•çš„æ–‡ä»¶çš„ä»»ä½•æ”¹å˜)ã€‚

```sh
(main)$ git reflog
0a2e358 HEAD@{0}: reset: moving to HEAD~2
0254ea7 HEAD@{1}: checkout: moving from 2.2 to main
c10f740 HEAD@{2}: checkout: moving from main to 2.2
```

ä¸Šé¢çš„reflogå±•ç¤ºäº†ä»mainåˆ†æ”¯ç­¾å‡º(checkout)åˆ°2.2 åˆ†æ”¯ï¼Œç„¶åå†ç­¾å›ã€‚ é‚£é‡Œï¼Œè¿˜æœ‰ä¸€ä¸ªç¡¬é‡ç½®(hard reset)åˆ°ä¸€ä¸ªè¾ƒæ—§çš„æäº¤ã€‚æœ€æ–°çš„åŠ¨ä½œå‡ºç°åœ¨æœ€ä¸Šé¢ä»¥ `HEAD@{0}`æ ‡è¯†.

å¦‚æœäº‹å®è¯æ˜ä½ ä¸å°å¿ƒå›ç§»(move back)äº†æäº¤(commit), reflog ä¼šåŒ…å«ä½ ä¸å°å¿ƒå›ç§»å‰mainä¸ŠæŒ‡å‘çš„æäº¤(0254ea7)ã€‚

```sh
$ git reset --hard 0254ea7
```

ç„¶åä½¿ç”¨git resetå°±å¯ä»¥æŠŠmainæ”¹å›åˆ°ä¹‹å‰çš„commitï¼Œè¿™æä¾›äº†ä¸€ä¸ªåœ¨å†å²è¢«æ„å¤–æ›´æ”¹æƒ…å†µä¸‹çš„å®‰å…¨ç½‘ã€‚

([æ‘˜è‡ª](https://www.atlassian.com/git/tutorials/rewriting-history/git-reflog)).

# å…¶å®ƒèµ„æº(Other Resources)

## ä¹¦(Books)

* [Pro Git](https://git-scm.com/book/en/v2) - Scott Chacon's excellent git book
* [Git Internals](https://github.com/pluralsight/git-internals-pdf) - Scott Chacon's other excellent git book

## æ•™ç¨‹(Tutorials)

* [Learn Git branching](https://learngitbranching.js.org/) ä¸€ä¸ªåŸºäºç½‘é¡µçš„äº¤äº’å¼ branching/merging/rebasing æ•™ç¨‹
* [Getting solid at Git rebase vs. merge](https://medium.com/@porteneuve/getting-solid-at-git-rebase-vs-merge-4fa1a48c53aa)
* [git-workflow](https://github.com/asmeurer/git-workflow) - [Aaron Meurer](https://github.com/asmeurer)çš„æ€ä¹ˆä½¿ç”¨Gitä¸ºå¼€æºä»“åº“è´¡çŒ®
* [GitHub as a workflow](http://hugogiraudel.com/2015/08/13/github-as-a-workflow/) - ä½¿ç”¨GitHubåšä¸ºå·¥ä½œæµçš„è¶£äº‹, å°¤å…¶æ˜¯ç©ºPRs

## è„šæœ¬å’Œå·¥å…·(Scripts and Tools)

* [firstaidgit.io](http://firstaidgit.io/) ä¸€ä¸ªå¯æœç´¢çš„æœ€å¸¸è¢«é—®åˆ°çš„Gitçš„é—®é¢˜
* [git-extra-commands](https://github.com/unixorn/git-extra-commands) - ä¸€å †æœ‰ç”¨çš„é¢å¤–çš„Gitè„šæœ¬
* [git-extras](https://github.com/tj/git-extras) - GIT å·¥å…·é›† -- repo summary, repl, changelog population, author commit percentages and more
* [git-fire](https://github.com/qw3rtman/git-fire) - git-fire æ˜¯ä¸€ä¸ª Git æ’ä»¶ï¼Œç”¨äºå¸®åŠ©åœ¨ç´§æ€¥æƒ…å†µä¸‹æ·»åŠ æ‰€æœ‰å½“å‰æ–‡ä»¶, åšæäº¤(committing), å’Œæ¨(push)åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯(é˜»æ­¢åˆå¹¶å†²çª)ã€‚
* [git-tips](https://github.com/git-tips/tips) - Gitå°æç¤º
* [git-town](https://github.com/Originate/git-town) - é€šç”¨ï¼Œé«˜çº§Gitå·¥ä½œæµæ”¯æŒï¼ http://www.git-town.com

## GUIå®¢æˆ·ç«¯(GUI Clients)
* [GitKraken](https://www.gitkraken.com/) - è±ªåçš„Gitå®¢æˆ·ç«¯ Windows, Mac & Linux
* [git-cola](https://git-cola.github.io/) - å¦å¤–ä¸€ä¸ªGitå®¢æˆ·ç«¯ Windows & OS X
* [GitUp](https://github.com/git-up/GitUp) - ä¸€ä¸ªæ–°çš„Gitå®¢æˆ·ç«¯ï¼Œåœ¨å¤„ç†Gitçš„å¤æ‚æ€§ä¸Šæœ‰è‡ªå·±çš„ç‰¹ç‚¹
* [gitx-dev](https://rowanj.github.io/gitx/) - å›¾å½¢åŒ–çš„Gitå®¢æˆ·ç«¯ OS X
* [Source Tree](https://www.sourcetreeapp.com/) - å…è´¹çš„å›¾å½¢åŒ–Gitå®¢æˆ·ç«¯ Windows & OS X
* [Tower](http://www.git-tower.com/) - å›¾å½¢åŒ–Gitå®¢æˆ·ç«¯ OS X(ä»˜è´¹)
